!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=16)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(10),a=n(11),o=n(12);t.exports=function(t){return r(t)||a(t)||o()}},function(t,e,n){var r=n(8),a=n(6);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(15);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e,n){var r=n(14);function a(e,n,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=a=Reflect.get:t.exports=a=function(t,e,n){var a=r(t,e);if(a){var o=Object.getOwnPropertyDescriptor(a,e);return o.get?o.get.call(n):o.value}},a(e,n,o||e)}t.exports=a},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e){!function(t,e){"use strict";t=t||"docReady",e=e||window;var n=[],r=!1,a=!1;function o(){if(!r){r=!0;for(var t=0;t<n.length;t++)n[t].fn.call(window,n[t].ctx);n=[]}}function i(){"complete"===document.readyState&&o()}e[t]=function(t,e){if("function"!=typeof t)throw new TypeError("callback for docReady(fn) must be a function");r?setTimeout((function(){t(e)}),1):(n.push({fn:t,ctx:e}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(o,1):a||(document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1)):(document.attachEvent("onreadystatechange",i),window.attachEvent("onload",o)),a=!0))}}("docReady",window)},function(t,e,n){var r=n(3);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";n.r(e);var r=n(4),a=n.n(r),o=(n(13),n(1)),i=n.n(o),c=n(2),u=n.n(c),s=n(5),d=n.n(s),l=n(6),p=n.n(l),f=n(3),h=n.n(f),v=n(9),g=n.n(v),y=n(7),m=n.n(y),w=n(0),b=n.n(w),A=n(8),S=n.n(A),P=document,E=(parent,window,function(t,e){var n=P.createElement("img");return n.height=1,n.width=1,n.style.display="none",n.src=t,n.onload=e,n.alt="",P.body.appendChild(n)}),C=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=P.createElement("script");return n.type="text/javascript",n.src=t,n.async=e,P.body.appendChild(n)},T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var k=function(){function t(e){i()(this,t),this.pixels=e,this.parameters={sku:"",orderId:"",qty:"",revenue:"",ltv:""}}return u()(t,[{key:"dropPixel",value:function(t,e){var n=this.pixels[t]||[],r=this.parameters;e&&Object.keys(e).forEach((function(t){return r[t]=e[t],!1})),n.forEach((function(t){var e=t,n="img";return"string"!=typeof t&&(e=t[0],(n=t[1])||(n="img")),e=(e=(e=(e=(e=(e=e.replace(/\[\[SKU\]\]/g,r.sku)).replace(/\[\[ORDERID\]\]/g,r.orderId)).replace(/\[\[QTY\]\]/g,r.qty)).replace(/\[\[REVENUE\]\]/g,r.revenue)).replace(/\[\[LTV\]\]/g,r.ltv)).replace(/\[\[ITEMS\]\]/g,(r.items||[]).map((function(t){return t.id||""})).join(",")),"img"===n?E(e):"script"===n?C(e):"iframe"===n&&function(t){var e=P.createElement("iframe");return e.width=1,e.height=1,e.style.display="none",e.src=t,P.body.appendChild(e)}(e)}))}}]),t}(),_=window.auvars["".concat("170")].t,x=(window.auvars["".concat("170")].p,function(t){function e(){var t;return i()(this,e),(t=d()(this,h()(e).call(this))).brand=window.Shopify.shop,t}return m()(e,t),u()(e,[{key:"captureProduct",value:function(t){try{var e=window.ShopifyAnalytics.meta.selectedVariantId,n=window.ShopifyAnalytics.meta.product.variants[0];return t?n=window.ShopifyAnalytics.meta.product.variants.find((function(e){return e.public_title===t})):e&&(n=window.ShopifyAnalytics.meta.product.variants.find((function(t){return t.id.toString()===e.toString()}))),n||((n=window.ShopifyAnalytics.meta.product.variants[0]).id=window.ShopifyAnalytics.meta.product.id),{id:"".concat(n.id,"-").concat(_),name:n.name,price:parseInt(n.price,10)/100,brand:this.brand}}catch(t){return console.error(t),null}}},{key:"sendProductEvents",value:function(){var t=this,e=this.captureProduct();if(e){this.sendViewProductEventToGA(e),this.appendPageLoadPixelCheck("view");var n=document.querySelector('button[name="add"]')||document.querySelector("form#add-item-form button")||document.querySelector("button.shopify_add_to_cart")||document.querySelector('input[name="add"]')||document.querySelector(".ProductForm__AddToCart")||document.querySelector("#AddToCart")||document.querySelector('.product-add input[type="submit"]');n&&window.au.push({category:"ListenerAttacher",input:n,method:function(){t.sendAddProductEventToGA(e),window.au.push({category:"behavior",action:"purchase-intent"});var n={event:"addToCart",data:e};t.profilerServiceRequest(n)}})}}},{key:"captureCart",value:function(){try{for(var t=document.querySelector("#order-summary").querySelectorAll("tr.product"),e=[],n=0;n<t.length;n++){var r=t[n],a=r.dataset.productId,o=r.querySelector(".product__description__name").textContent,i=parseFloat(r.querySelector(".product__price").textContent.replace(/[^0-9.]/g,"")),c=parseInt(r.querySelector(".product__quantity").textContent.replace(/\s+/g,""),10),u={id:"".concat(a,"-").concat(_),name:o,brand:this.brand,price:i,quantity:c};e.push(u)}return e}catch(t){return console.error(t),null}}},{key:"calculateRevenue",value:function(t){for(var e=0,n=0;n<t.length;n++)e+=parseFloat(t[n].price);return e}},{key:"captureTransaction",value:function(){try{var t=window.Shopify.checkout,e=window.Shopify.shop,n=t.order_id,r=parseFloat(t.subtotal_price),a=0;try{a=parseFloat(t.total_tax)}catch(t){console.error(t)}var o=0;if(t.shipping_rate)try{o=parseFloat(t.shipping_rate)}catch(e){try{o=parseFloat(t.shipping_rate.price)}catch(t){console.error(t)}}var i=this.formatProductsInTransaction(t.line_items);return{id:"".concat(n,"-").concat(_),affiliation:e,revenue:r,tax:a,shipping:o,items:i}}catch(t){return console.error(t),null}}},{key:"formatProductsInTransaction",value:function(t){for(var e=t,n=[],r=0;r<e.length;r++){var a=e[r],o={id:a.product_id,name:a.title,brand:this.brand,price:parseFloat(a.price),quantity:a.quantity};n.push(o)}return n}},{key:"initialize",value:function(){var t=this,e=window.ShopifyAnalytics&&window.ShopifyAnalytics.meta&&window.ShopifyAnalytics.meta.product,n=window.Shopify.Checkout&&window.Shopify.Checkout.page&&"thank_you"!==window.Shopify.Checkout.page,r=window.Shopify.checkout,a=document.querySelectorAll("div.quickadd");if(a.length>0)for(var o=function(e){var n=a[e],r=n.querySelector("button").dataset.cartAdd,o=n.querySelector('[class$="item__title"]').textContent;if(n.querySelector(".js-option-value")){var i=n.querySelector(".js-option-value").textContent.split(": ");o+=i[i.length-1]}var c={id:r,name:o,price:parseFloat(n.querySelector(".product-price__price").textContent.replace(/[^0-9.]/g,"")),brand:t.brand};window.au.push({category:"ListenerAttacher",input:n,method:function(){t.sendAddProductEventToGA(c);var e={event:"addToCart",data:c};window.au.push({category:"behavior",action:"purchase-intent"}),t.profilerServiceRequest(e)}})},i=0;i<a.length;i++)o(i);if(e){this.sendProductEvents();var c=document.querySelectorAll(".swatch-element");if(c.length>0)for(window.addEventListener("ProductMetaUpdated",(function(){t.sendProductEvents()})),i=0;i<c.length;i++){var u=c[i];window.au.push({category:"ListenerAttacher",input:u,method:function(){window.Adgt.SetVarInterval(window.ShopifyAnalytics.meta,"selectedVariantId")}})}}if(n){var s=this.captureCart();s&&(window.au.push({category:"behavior",action:"purchase-intent"}),this.appendPageLoadPixelCheck("checkout"),this.sendAllProductsInCartToGA(s,(function(){return t.sendCheckoutEventToGA()})))}if(r&&-1!==window.location.pathname.indexOf("thank_you")){var d=this.captureTransaction();if(d){var l=d.items;window.au.push({category:"behavior",action:"purchase-complete"}),this.appendPageLoadPixelCheck("transaction"),this.sendAllProductsInTransactionToGA(l,(function(){return t.sendTransactionEventToGA(d)}))}else this.transaction={id:"null-".concat(_),affiliation:this.brand,revenue:0,tax:0,shipping:0,items:[]},this.appendPageLoadPixelCheck("transaction")}}}]),e}(function(){function t(){i()(this,t),window.aupixels?this.pixels=window.aupixels.ec||{}:this.pixels={},this.ECPixels=new k(this.pixels),this.pageLoadRun=[],window.Adgt||(window.Adgt={}),window.Adgt.VarWatch=function(t,e,n){var r=t[e];return function(){if(t[e]!=r){var a=r;r=t[e],n(a,r)}}},window.Adgt.VarHandler=function(t,e){window.au.push({category:"DispatchEvent",eventName:"ProductMetaUpdated"}),clearInterval(window.Adgt.variantInterval)},window.Adgt.SetVarInterval=function(t,e){window.Adgt.variantInterval=setInterval(window.Adgt.VarWatch(t,e,window.Adgt.VarHandler),100)},window.Adgt.Store=this}return u()(t,[{key:"pathIncludes",value:function(t){return-1!==window.location.pathname.indexOf(t)}},{key:"updatePixels",value:function(){var t=this;this.pixels=window.aupixels.ec||{},this.ECPixels=new k(this.pixels),this.pageLoadRun.forEach((function(e){var n={};"add"===e||"view"===e?n={sku:t.product.id}:"checkout"===e?n={qty:t.qty,revenue:t.revenue}:"transaction"===e&&(n={qty:t.transaction.items.length||t.qty,revenue:t.transaction.revenue||t.revenue,orderId:t.transaction.id}),t.ECPixels.dropPixel(e,n)})),this.pageLoadRun=[]}},{key:"appendPageLoadPixelCheck",value:function(t){this.pageLoadRun.filter((function(e){return e===t})).length||this.pageLoadRun.push(t)}},{key:"setClassProducts",value:function(t){this.products=t,this.qty=t.length,this.revenue=t.reduce((function(t,e){return t+parseFloat(e.price)}),0)}},{key:"sendAddProductEventToGA",value:function(t){this.product=t;try{this.gaAddProduct(t),ga("".concat("auPassiveTagger",".ec:setAction"),"add"),ga("".concat("auPassiveTagger",".send"),"event","UX","click","add to cart"),this.ECPixels.dropPixel("add",{sku:t.id,revenue:t.price.toFixed(2)})}catch(t){console.error(t)}}},{key:"sendViewProductEventToGA",value:function(t){this.product=t;try{ga("".concat("auPassiveTagger",".ec:addImpression"),{id:t.id,name:t.name,price:t.price,brand:t.brand}),ga("".concat("auPassiveTagger",".ec:setAction"),"detail"),ga("".concat("auPassiveTagger",".send"),"pageview"),this.ECPixels.dropPixel("view",{sku:t.id})}catch(t){console.error(t)}}},{key:"sendAllProductsInCartToGA",value:function(t,e){this.setClassProducts(t);try{for(var n=0;n<t.length;n++){var r=t[n];this.gaAddProduct(r)}return e(),!0}catch(t){return!1}}},{key:"sendCheckoutEventToGA",value:function(){try{ga("".concat("auPassiveTagger",".ec:setAction"),"checkout",{step:1}),ga("".concat("auPassiveTagger",".send"),"event",{eventCategory:"Checkout",eventAction:"checkout",hitCallback:function(){}}),this.ECPixels.dropPixel("checkout",{qty:this.qty,revenue:this.revenue})}catch(t){console.error(t)}}},{key:"sendAllProductsInTransactionToGA",value:function(t,e){this.setClassProducts(t);try{for(var n=0;n<t.length;n++){var r=t[n];this.gaAddProduct(r)}return e(),!0}catch(t){return!1}}},{key:"gaAddProduct",value:function(t){ga("".concat("auPassiveTagger",".ec:addProduct"),{id:t.id,name:t.name,brand:t.brand,price:t.price,quantity:t.quantity||1})}},{key:"sendTransactionEventToGA",value:function(t){this.transaction=t;try{ga("".concat("auPassiveTagger",".ec:setAction"),"purchase",{id:t.id,affiliation:t.affiliation,revenue:t.revenue,tax:t.tax,shipping:t.shipping}),ga("".concat("auPassiveTagger",".send"),"pageview"),this.ECPixels.dropPixel("transaction",{qty:(t.items||[]).length||this.qty,revenue:t.revenue||this.revenue,orderId:t.id,items:t.items||[],ltv:t.ltv||""})}catch(t){console.error(t)}}},{key:"profilerServiceRequest",value:function(t){window.au.push({category:"sendUserBehaviour",action:JSON.stringify(t)})}},{key:"sendErrorToSentry",value:function(){return!1}}]),t}()));function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(n,!0).forEach((function(e){b()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var R,j,L,I=window,G=document,N={"og:title":"title","og:description":"description","og:image":"image","og:url":"url","og:type":"type","og:name":"name","og:locale":"locale"},H={keywords:"keywords"},M={tax_brand:"BRAND",tax_cat:"CATEGORY",tax_tag:"TAG",tax_type:"TYPE"},V=function(t){function e(t){var n;return i()(this,e),n=d()(this,h()(e).call(this,t)),b()(p()(n),"tagsReader",(function(){var t=[];if(n.u.hostname.match("vinepair.com")){var e=window.audigentData||{};Object.keys(e).forEach((function(n){e[n].forEach((function(e){t.push("VINEPAIR.COM - ".concat(M[n]," - ").concat(e.toUpperCase()))}))}))}n.push({category:"writeDecoratorRecord",tags:t,decor_dict:{}})})),n.tagsReader(),n.docReady=n.docReady.bind(p()(n)),n}return m()(e,t),u()(e,[{key:"docReady",value:function(){g()(h()(e.prototype),"docReady",this).call(this)}},{key:"facebook",value:function(){return!1}}]),e}(function(){function t(e){var n=this;i()(this,t),b()(this,"push",(function(t,e,r){var a={};if("string"==typeof t)a.category=t,"string"==typeof e||"number"==typeof e?a.partnerId=e:e&&(a=O({},a,{},e)),r&&(a=O({},a,{},r));else{if(!t||"object"!==S()(t))return null;a=t}if(a.partnerId&&a.partnerId.toString()!==n.auvars.p.toString())return null;(n[a.category]||function(){return null})(a)})),b()(this,"writeDecoratorRecord",(function(t){if(!(n.randNum>=n.decoratorTarget))return null;var e=O({},n.getMetaAttributes(t),{tags:n.getTags(t).join(),tagger_id:n.auvars.t,partner_id:n.auvars.p}),r=new XMLHttpRequest,a="".concat("https://p.ad.gt","/api/v1/dec");return r.open("POST",a,!0),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(e)),r})),b()(this,"setupGA",(function(){var t,e,r,a,o;I.ga||(e=G,r="script","ga",(t=I).GoogleAnalyticsObject="ga",t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,a=e.createElement(r),o=e.getElementsByTagName(r)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(a,o)),ga("create","UA-87198801-1","auto","auPassiveTagger"),ga("".concat("auPassiveTagger",".require"),"ecommerce"),ga("".concat("auPassiveTagger",".require"),"ec"),ga("".concat("auPassiveTagger",".set"),"anonymizeIp",!0),ga("".concat("auPassiveTagger",".set"),"dimension1",n.auvars.a),ga("".concat("auPassiveTagger",".set"),"dimension2","none"),ga("".concat("auPassiveTagger",".set"),"dimension3",n.auvars.p),ga("".concat("auPassiveTagger",".set"),"dimension4",n.u.hostname),ga("".concat("auPassiveTagger",".set"),"dimension5",n.u.pathname),ga("".concat("auPassiveTagger",".set"),"dimension6","Passive Tagger"),ga("".concat("auPassiveTagger",".set"),"dimension7",n.auvars.t),(n.randNum>=.85||["158"].includes(n.auvars.p.toString())&&n.randNum>=.7||["220"].includes(n.auvars.p.toString()))&&ga("".concat("auPassiveTagger",".send"),"pageview")})),b()(this,"ListenerIterator",(function(t,e){Array.prototype.forEach.call(n.d.querySelectorAll(t),(function(t){n.ListenerAttacher({input:t,method:e})}))})),b()(this,"ListenerAttacher",(function(t){var e=t.input,n=t.method;e.addEventListener?e.addEventListener("mousedown",n):e.attachEvent&&e.attachEvent("mousedown",n)})),b()(this,"GlobalListenerHandler",(function(t){n.GlobalHandlers[t.type].forEach((function(e){if(t.target.matches(e.selector))e.method(t);else for(var n=t.target,r=!1;n.parentElement&&!r;)(r=(n=n.parentElement).matches(e.selector))&&e.method(O({},t,{target:n}))}))})),b()(this,"GlobalListenerAttacher",(function(t,e,r){"string"==typeof t&&(t=[t]),t.forEach((function(t){n.GlobalHandlers[t]=n.GlobalHandlers[t]||[],n.GlobalHandlers[t].push({selector:e,method:r}),document.addEventListener?(document.removeEventListener(t,window.au.l),document.addEventListener(t,window.au.l)):document.attachEvent&&(document.detachEvent(t,window.au.l),document.attachEvent(t,window.au.l))}))})),b()(this,"sendOffsiteClick",(function(t){var e=t.url;E("".concat("https://a.ad.gt","/api/v1/off-site-click/").concat(n.auvars.p,"?tagger_id=").concat(n.auvars.t,"&url=").concat(e))})),b()(this,"clickHandler",(function(t){var e=t.currentTarget.getAttribute("href");null!==e&&n.include_internal_links.includes(window.location.hostname)&&window.au.push({category:"sendSPAPageView",url:e})})),b()(this,"sendUserBehaviour",(function(t){var e={click_url:t.action,tagger_id:n.auvars.t,audigent_id:n.auvars.a},r=new XMLHttpRequest,a="".concat("https://p.ad.gt","/api/v1/ubh");r.open("POST",a,!0),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(e))})),b()(this,"behavior",(function(t){var e=encodeURIComponent("".concat(n.u.protocol,"//").concat(n.u.hostname).concat(n.u.pathname,"__audigent-behavior-").concat(t.action).concat(n.u.search).concat(n.u.hash));n.sendOffsiteClick({url:e}),n.sendGAEvent({eventCategory:"audigent-behavior",eventAction:t.action,eventLabel:n.auvars.t})})),b()(this,"sendEvent",(function(t){var e=t.event,r=t.events,a=t.type;if(!(e=e||r)){if(!a)return null;delete(e=O({},t)).category,delete e.partnerId}var o={tagger_id:n.auvars.t,partner_id:n.auvars.p,audigent_id:n.auvars.a};o.events=Array.isArray(e)?e:[e];var i=new XMLHttpRequest,c="".concat("https://p.ad.gt","/api/v1/event");return i.open("POST",c,!0),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(o)),""})),b()(this,"sendGAEvent",(function(t){var e=t.eventCategory,n=t.eventAction,r=t.eventLabel,a=t.skipSQS;ga("".concat("auPassiveTagger",".send"),{hitType:"event",eventCategory:e,eventAction:n,eventLabel:r}),a||window.au.push({category:"sendEvent",event:{type:e,eventAction:n,eventLabel:r}})})),b()(this,"segCapture",(function(){var t=window.au_seg;if(((t||{}).segments||[]).length>0){var e={tagger_id:n.auvars.t,partner_id:n.auvars.p,audigent_id:n.auvars.a,segment_ids:t.segments.join("|")},r=new XMLHttpRequest,a="".concat("https://p.ad.gt","/api/v1/segs");r.open("POST",a,!0),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(e))}return""})),b()(this,"otpTrack",(function(){var t=window.au_seg;if(t&&t.segments){var e=t.segments.filter((function(t){return t.match(/AU_SEG_(AGE|GENDER)/gi)}));n.randNum>=.9&&(n.sendGAEvent({eventCategory:"otpTracker",eventAction:e.join("|"),eventLabel:n.u.hostname,skipSQS:!0}),n.segCapture())}if(n.randNum>=.99||["134"].includes(n.auvars.p.toString())&&n.randNum>=.7){var r=n.u.hostname,a=new XMLHttpRequest,o="".concat(n.auvars.p.toString(),"-").concat(n.auvars.a),i="".concat(n.auvars.p.toString(),"-").concat(n.auvars.y),c="".concat("https://seg.ad.gt","/api/v1/demo?au_id=").concat(o,"&tagger_id=").concat(i);a.open("get",c,!0),a.setRequestHeader("Content-type","application/json"),a.addEventListener("load",(function(){var t=JSON.parse(this.responseText).segments||[];t.length&&window.au.push({category:"sendGAEvent",eventCategory:"otpTester",eventAction:t.join("|"),eventLabel:r,skipSQS:!0})})),a.send()}})),b()(this,"pixels",(function(){var t="".concat("https://pixels.ad.gt","/api/v1/getpixels?tagger_id=").concat(n.auvars.t,"&url=").concat(encodeURIComponent(n.u.href),"&code='none'");C(t,!0)})),b()(this,"sendSPAPageView",(function(t){var e=t.url;if(e){e.startsWith("//")&&(e="http://"+e),!e.startsWith("/")&&e.includes("://")||(e=n.d.location.protocol+"//"+n.d.location.host+(e.startsWith("/")?"":"/")+e);try{var r=new URL(e);r.host===n.d.location.host&&(n.sendOffsiteClick(r.href),ga("".concat("auPassiveTagger",".send"),"pageview",r.pathname+r.hash))}catch(t){}}})),b()(this,"tags",(function(t){return console.log("[Audigent] this method is deprecated. Please contact your account manager"),!1})),b()(this,"conversion",(function(t){console.log("[Audigent] Conversion Event - ".concat(t.action))})),b()(this,"beopEvent",(function(t){var e=t.partnerId||n.auvars.p;n.sendEvent({event:O({},t.data||{},{partner_id:e,type:"beop"})})})),b()(this,"trackEvent",(function(t){return!1})),b()(this,"DispatchEvent",(function(t){var e=function(t){if("function"==typeof window.CustomEvent)return new CustomEvent(t);var e=!1,n=!1,r=void 0,a=document.createEvent("CustomEvent");return a.initCustomEvent(t,e,n,r),a}(t.eventName);window.dispatchEvent(e)})),b()(this,"optout",(function(){E("".concat("https://ids.ad.gt","/api/v1/optout?au_id=").concat(n.auvars.a))}));var r=(e||{}).decoratorTarget;this.w=I,this.u=I.location,this.d=G,this.auvars=I.auvars["".concat("170")],this.GlobalHandlers={},this.randNum=Math.random(),this.decoratorTarget=r||.995,this.docReady=this.docReady.bind(this),this.facebook=this.facebook.bind(this)}return u()(t,[{key:"valueOf",value:function(){return null}},{key:"docReady",value:function(){var t=this;if(this.setupTaggerId(),this.sendPageView(),this.pixels(),this.facebook(),this.setupGA(),this.ListenerIterator("a",this.clickHandler),this.include_internal_links=[],I.addEventListener("hashchange",(function(){t.sendSPAPageView({url:t.u.href}),t.pixels()})),window.Shopify){var e=new x;e.initialize(),window.addEventListener("aupixels",(function(){e.updatePixels()}))}this.DispatchEvent({eventName:"aufp"}),window.auvars.fp=!0,this.otpTrack()}},{key:"facebook",value:function(){return!["57","95","269","273","305","314","317","381"].includes(this.auvars.p)&&(t=window,e=document,n="script",t.fbq||(r=t.fbq=function(){r.callMethod?r.callMethod.apply(r,arguments):r.queue.push(arguments)},t._fbq||(t._fbq=r),r.push=r,r.loaded=!0,r.version="2.0",r.queue=[],(a=e.createElement(n)).async=!0,a.src="https://connect.facebook.net/en_US/fbevents.js",(o=e.getElementsByTagName(n)[0]).parentNode.insertBefore(a,o)),fbq("init","1853083501571805"),fbq("trackSingle","1853083501571805","PageView",{partner_id:this.auvars.p,tagger_id:this.auvars.t}),!0);var t,e,n,r,a,o}},{key:"getTaggerComponents",value:function(){return null}},{key:"setupTaggerId",value:function(){var t=this.getTaggerComponents()||[];if(!1===Array.isArray(t)||0==t.length)return!1;var e="au1t-"+function(t){function e(t,e){var n,r,a,o,i;return a=2147483648&t,o=2147483648&e,i=(1073741823&t)+(1073741823&e),(n=1073741824&t)&(r=1073741824&e)?2147483648^i^a^o:n|r?1073741824&i?3221225472^i^a^o:1073741824^i^a^o:i^a^o}function n(t,n,r,a,o,i,c){return t=e(t,e(e(n&r|~n&a,o),c)),e(t<<i|t>>>32-i,n)}function r(t,n,r,a,o,i,c){return t=e(t,e(e(n&a|r&~a,o),c)),e(t<<i|t>>>32-i,n)}function a(t,n,r,a,o,i,c){return t=e(t,e(e(n^r^a,o),c)),e(t<<i|t>>>32-i,n)}function o(t,n,r,a,o,i,c){return t=e(t,e(e(r^(n|~a),o),c)),e(t<<i|t>>>32-i,n)}function i(t){var e,n="",r="";for(e=0;3>=e;e++)n+=(r="0"+(r=t>>>8*e&255).toString(16)).substr(r.length-2,2);return n}var c,u,s,d,l,p,f,h,v;for(c=function(t){for(var e,n=t.length,r=16*(((e=n+8)-e%64)/64+1),a=Array(r-1),o=0,i=0;i<n;)o=i%4*8,a[e=(i-i%4)/4]|=t.charCodeAt(i)<<o,i++;return a[e=(i-i%4)/4]|=128<<i%4*8,a[r-2]=n<<3,a[r-1]=n>>>29,a}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);128>r?e+=String.fromCharCode(r):(127<r&&2048>r?e+=String.fromCharCode(r>>6|192):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128)),e+=String.fromCharCode(63&r|128))}return e}(t)),p=1732584193,f=4023233417,h=2562383102,v=271733878,t=0;t<c.length;t+=16)u=p,s=f,d=h,l=v,p=n(p,f,h,v,c[t+0],7,3614090360),v=n(v,p,f,h,c[t+1],12,3905402710),h=n(h,v,p,f,c[t+2],17,606105819),f=n(f,h,v,p,c[t+3],22,3250441966),p=n(p,f,h,v,c[t+4],7,4118548399),v=n(v,p,f,h,c[t+5],12,1200080426),h=n(h,v,p,f,c[t+6],17,2821735955),f=n(f,h,v,p,c[t+7],22,4249261313),p=n(p,f,h,v,c[t+8],7,1770035416),v=n(v,p,f,h,c[t+9],12,2336552879),h=n(h,v,p,f,c[t+10],17,4294925233),f=n(f,h,v,p,c[t+11],22,2304563134),p=n(p,f,h,v,c[t+12],7,1804603682),v=n(v,p,f,h,c[t+13],12,4254626195),h=n(h,v,p,f,c[t+14],17,2792965006),p=r(p,f=n(f,h,v,p,c[t+15],22,1236535329),h,v,c[t+1],5,4129170786),v=r(v,p,f,h,c[t+6],9,3225465664),h=r(h,v,p,f,c[t+11],14,643717713),f=r(f,h,v,p,c[t+0],20,3921069994),p=r(p,f,h,v,c[t+5],5,3593408605),v=r(v,p,f,h,c[t+10],9,38016083),h=r(h,v,p,f,c[t+15],14,3634488961),f=r(f,h,v,p,c[t+4],20,3889429448),p=r(p,f,h,v,c[t+9],5,568446438),v=r(v,p,f,h,c[t+14],9,3275163606),h=r(h,v,p,f,c[t+3],14,4107603335),f=r(f,h,v,p,c[t+8],20,1163531501),p=r(p,f,h,v,c[t+13],5,2850285829),v=r(v,p,f,h,c[t+2],9,4243563512),h=r(h,v,p,f,c[t+7],14,1735328473),p=a(p,f=r(f,h,v,p,c[t+12],20,2368359562),h,v,c[t+5],4,4294588738),v=a(v,p,f,h,c[t+8],11,2272392833),h=a(h,v,p,f,c[t+11],16,1839030562),f=a(f,h,v,p,c[t+14],23,4259657740),p=a(p,f,h,v,c[t+1],4,2763975236),v=a(v,p,f,h,c[t+4],11,1272893353),h=a(h,v,p,f,c[t+7],16,4139469664),f=a(f,h,v,p,c[t+10],23,3200236656),p=a(p,f,h,v,c[t+13],4,681279174),v=a(v,p,f,h,c[t+0],11,3936430074),h=a(h,v,p,f,c[t+3],16,3572445317),f=a(f,h,v,p,c[t+6],23,76029189),p=a(p,f,h,v,c[t+9],4,3654602809),v=a(v,p,f,h,c[t+12],11,3873151461),h=a(h,v,p,f,c[t+15],16,530742520),p=o(p,f=a(f,h,v,p,c[t+2],23,3299628645),h,v,c[t+0],6,4096336452),v=o(v,p,f,h,c[t+7],10,1126891415),h=o(h,v,p,f,c[t+14],15,2878612391),f=o(f,h,v,p,c[t+5],21,4237533241),p=o(p,f,h,v,c[t+12],6,1700485571),v=o(v,p,f,h,c[t+3],10,2399980690),h=o(h,v,p,f,c[t+10],15,4293915773),f=o(f,h,v,p,c[t+1],21,2240044497),p=o(p,f,h,v,c[t+8],6,1873313359),v=o(v,p,f,h,c[t+15],10,4264355552),h=o(h,v,p,f,c[t+6],15,2734768916),f=o(f,h,v,p,c[t+13],21,1309151649),p=o(p,f,h,v,c[t+4],6,4149444226),v=o(v,p,f,h,c[t+11],10,3174756917),h=o(h,v,p,f,c[t+2],15,718787259),f=o(f,h,v,p,c[t+9],21,3951481745),p=e(p,u),f=e(f,s),h=e(h,d),v=e(v,l);return(i(p)+i(f)+i(h)+i(v)).toLowerCase()}(t.join());this.auvars.t=e,I.auvars.t=e}},{key:"getMetaAttributes",value:function(){var t=this.d.querySelectorAll("meta"),e={url:this.u.href,title:this.d.title},n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value,u=c.getAttribute("property");if(u in N)e[N[u]]=c.getAttribute("content");else{var s=c.getAttribute("name");if(s in H){var d=H[s];e[d]="keywords"===d?(c.getAttribute("content")||"").split(",").map((function(t){return t.trim()})).filter((function(t){return t.length>0})):c.getAttribute("content")}}}}catch(t){r=!0,a=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return e}},{key:"getAttributes",value:function(t){return O({},(t||{}).decor_dict||{},{},this.getMetaAttributes())}},{key:"getMetaTags",value:function(){var t=this,e=document.head.querySelectorAll("meta[name='audigent:tags']")[0];return e?e.content.split("|").map((function(t){return t.trim()})).filter((function(t){return t.length>0})).map((function(e){return(t.u.hostname+" > "+e).toUpperCase()})):[]}},{key:"getTags",value:function(t){var e=(t||{}).tags||[];return[].concat(a()(this.getMetaTags()),a()(e)).filter((function(t){return"string"==typeof t||t instanceof String})).map((function(t){return t.replace(/,/g,"")})).map((function(t){return t.trim()})).filter((function(t){return t.length>0}))}},{key:"sendPageView",value:function(t){if("1p"!==this.auvars.m)return!1;var e=this.getAttributes(t),n=this.getTags(t),r=1*new Date,a={category:"pageView",version:"v2",created_at:r,properties:O({},{event_timestamp:r,url:this.w.location.href,referrer:this.d.referrer,partner_id:this.auvars.p,tagger_id:this.auvars.t,audigent_id:this.auvars.a,attributes:e,tags:n},{},(t||{}).data||{})},o=new XMLHttpRequest,i="".concat("https://a.ad.gt","/api/v1/collect");return o.open("POST",i,!0),o.setRequestHeader("Content-type","text/plain"),o.send(function(t){var e,n,r,a,o,i,c,u="",s=0;for(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t);s<t.length;)a=(e=t.charCodeAt(s++))>>2,o=(3&e)<<4|(n=t.charCodeAt(s++))>>4,i=(15&n)<<2|(r=t.charCodeAt(s++))>>6,c=63&r,isNaN(n)?i=c=64:isNaN(r)&&(c=64),u=u+T.charAt(a)+T.charAt(o)+T.charAt(i)+T.charAt(c);return u}(JSON.stringify(a))),o}},{key:"setupInPageTaxonomy",value:function(t){var e=new URL("".concat("https://seg.ad.gt","/api/v1/segments"));e.searchParams.set("url",encodeURIComponent(this.u.href)),e.searchParams.set("partner_id",this.auvars.p),e.searchParams.set("tagger_id",this.auvars.t),e.searchParams.set("au_id",this.auvars.a);var n=new XMLHttpRequest;n.timeout=1e4,n.onload=function(){if(n.readyState==XMLHttpRequest.DONE&&200==n.status){var e=JSON.parse(n.response);I.au_seg=e,(t||[]).forEach((function(t){return t(I,e.segments)}))}},n.ontimeout=function(){console.log("[Audigent] Taxonomy Service > Timeout")},n.onerror=function(){console.log("[Audigent] Taxonomy Service > Invalid Response")},n.open("GET",e),n.send()}}]),t}());R=window,j="".concat("170"),L=R.au&&Array.isArray(R.au)?a()(R.au):[],R.auvars.autag_objs=[].concat(a()((R.auvars.autag_objs||[]).filter((function(t){return"autag"!==t}))),["autag"]),R.au={push:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];R.auvars.autag_objs.forEach((function(t){return Object.values(R[t]||{}).forEach((function(t){return t.push.apply(t,e)}))}))},l:function(t){R.auvars.autag_objs.forEach((function(e){return Object.values(R[e]||{}).forEach((function(e){return e.GlobalListenerHandler(t)}))}))},init:function(){R.auvars[j].hist=R.auvars[j].hist||[];var t=R.auvars[j].hist.slice(-1)[0];R.autag=R.autag||{},R.autag[j]&&t===R.location.href||(R.auvars[j].hist.push(R.location.href),R.autag[j]=new V)}},R.au.init(),L.forEach((function(t){return R.au.push(t)})),docReady((function(){return window.au.push({category:"docReady"})}))}]);