!function(){const e={hasLocalStorage:!0,init(){try{this.hasLocalStorage=!!window.localStorage,this.ls=window.localStorage}catch(e){this.hasLocalStorage=!1}},clean(t){if(!this.hasLocalStorage)return null;delete e[t]},get(e){return this.hasLocalStorage?this.ls.getItem(e):null},set(e,t){this.hasLocalStorage&&this.ls.setItem(e,t)}};e.init();const t=Date,i=t.now,n={loadScript:function(e,t,i){if(!document)return;const n=document.createElement("script");e=("http:"===document.location.protocol?"http:":"https:")+e,n.src=e,n.async=!0,n.onload=t,n.onerror=i,(document.body||document.head||document.documentElement).appendChild(n)},isLightHouse:()=>!(!window.navigator||!navigator.userAgent)&&navigator.userAgent.indexOf("lighthouse")>-1,isMobileUser(){if(window.navigator&&navigator.userAgent){const e=navigator.userAgent.toLowerCase();if(e.indexOf("iphone")>-1||e.indexOf("android")>-1||e.indexOf("ipad")>-1)return!0}return!1},NOW:()=>i.call(t),getDateStr:function(){const e=new Date;return""+e.getFullYear()+e.getMonth()+e.getDate()},getUtmFromGoogleCookie:function(){if(!document.cookie)return{};const e=document.cookie.match("__utmz_gtm=([^;]*)");if(e&&e.length){const t=e[1];if(t){const e={},i=t.split("|");for(let t=0;t<i.length;t++){const n=i[t].split("=");e[n[0]]=n[1]}return e}}return{}},getParameterByName:function(e){const t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},setCookie:function(e,t,i,n){const o=new Date;o.setTime(o.getTime()+60*i*60*1e3),"hourly"===n?o.setMinutes(0,0,0):"daily"===n&&o.setHours(0,0,0,0);const s="expires="+o.toUTCString();document.cookie=e+"="+t+";"+s+";path=/"},getCookie:function(e){const t=e+"=";let i;try{i=decodeURIComponent(document.cookie)}catch(e){i=document.cookie}const n=i.split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},generateUniqId:()=>(n.NOW()+Math.random()).toString(36).substr(2,9),merge(e,t){void 0===e&&(e={});for(const i in t)e[i]=t[i];return e},getTopDomain:function(){if(location.ancestorOrigins&&location.ancestorOrigins.length)return location.ancestorOrigins[location.ancestorOrigins.length-1];try{return n.getTopWindow(window).location.host}catch(e){return null}},getTopWindow:function(e){const t=function(e){try{return e===e.top?e:e.parent.location.href?t(e.parent):e}catch(t){return e}};return t(e)},copy:function(e){let t,i;const o=Array.isArray(e)?[]:{};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t=e[i],o[i]=null===t?null:"object"==typeof t?n.copy(t):t);return o},contentPageUrl:function(){if(location.ancestorOrigins&&location.ancestorOrigins.length)return location.ancestorOrigins[location.ancestorOrigins.length-1];{let e;try{e=window.parent.location.href}catch(t){e=""}return window.location.href!==e?document.referrer:window.location.href}},debug:function(){if(this.vpbIsDev&&e.hasLocalStorage&&e.get("vpbdebug")>="3"){const e=Array.prototype.slice.call(arguments,0);e.unshift(performance.now()),e.unshift("VPB: "),console.log.apply(console,e)}},log:function(){if(this.vpbIsDev||e.hasLocalStorage&&e.get("vpbdebug")>="1"){this.vpbIsDev=!0;const t=Array.prototype.slice.call(arguments,0);e.hasLocalStorage&&e.get("vpbdebug")>="2"&&t.unshift(performance.now()),t.unshift("VPB: "),console.log.apply(console,t)}},error:function(){if(this.vpbIsDev||e.hasLocalStorage&&e.get("vpbdebug")>="1"){this.vpbIsDev=!0;const t=Array.prototype.slice.call(arguments,0);e.hasLocalStorage&&e.get("vpbdebug")>="2"&&t.unshift(performance.now()),t.unshift("VPB WARN: "),console.error.apply(console,t)}},xhr:function(e){let t=null;if(window.XMLHttpRequest&&(t=new XMLHttpRequest),!t)return console.error("Giving up :( Cannot create an XMLHTTP instance"),e.onError&&e.onError(),!1;try{t.withCredentials=e.sendCookie||!1}catch(e){}if(e.timeout&&(t.timeout=e.timeout),t.onreadystatechange=function(){4===t.readyState&&(t.status>=200&&t.status<300?e.callback&&e.callback(t.responseText):e.onError&&e.onError(t.status))},t.open(e.method||"GET",e.url||e.uri),e.data,e.headers)for(const i in e.headers)t.setRequestHeader(i,e.headers[i]);return t.send(e.data?JSON.stringify(e.data):null),this},debounce:function(e,t){let i;return function(){const n=this,o=arguments,s=function(){i=null,e.apply(n,o)};clearTimeout(i),i=setTimeout(s,t)}},values:function(e){return Object.keys(e).map((t=>e[t]))},keys:function(e){const t=[];for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t},each:function(e,t){if(t)for(let i=0;i<e.length;i++)t(e[i])},some:function(e,t){if(!t)return!1;for(let i=0;i<e.length;i++)if(t(e[i]))return!0;return!1},filter:function(e,t){if(!e)return e;const i=[];for(let n=0;n<e.length;n++)t(e[n])&&i.push(e[n]);return i},map:function(e,t){if(!e||0===e.length)return e;const i=[];for(let n=0;n<e.length;n++)i.push(t(e[n]));return i},findValue:function(e,t){for(const i in e)if(t(e[i],i))return e[i];return null},timeDiff:function(e){return Math.min(Math.abs(n.NOW()-e),4294967295)}};let o=window.vpb||{};window.vpb=o=n.merge(o,{init_time:n.NOW(),VPB_VERSION:"N058",BUILD_VERSION:"3onsa",SESSION_ID:n.generateUniqId(),aucs:[],eventLog:[],getConfig:function(e){if("fastAsync"===e&&!n.isMobileUser())return;const t=void 0===o[e]?o.config[e]:o[e];return"buyersInRefresh"!==e||t?t:["market","clientbuyer"]},getADomain:function(){return"ghb."+o.config.WLDomain.split(".").slice(1).join(".")},getRealScriptHost:function(){return o.getConfig("realHost")||o.config.WLDomain},getMaxRefreshCount:function(e){return e&&e.rLimit||o.getConfig("maxRefreshesPerUnit")||50},getPublisherId:function(){return o.config.pubId},getSiteId:function(){return o.config.siteId},getDevSuffix:function(){return o.config.isDev?".dev":""},setClientSchain(e={}){e.hp=void 0===e.hp?1:e.hp,o.config.schainPublisher=e,o.emit("vpb:changeClientSchain",e)}});var s=o;const r={},d={on(e,t){r[e]=r[e]||[],r[e].push(t)},emit(e,t){if(r[e])for(let i=0;i<r[e].length;i++)try{r[e][i](t)}catch(t){n.error("Fail exec event",e,t)}},init(){s.on=this.on,s.emit=this.emit}},a={documentHiddenProperty:"",state:!1,checkState(){this.state=!document[this.documentHiddenProperty],d.emit("visibilityManager:change",this.state)},init(){let e;"hidden"in document?(this.documentHiddenProperty="hidden",e="visibilitychange"):"msHidden"in document?(this.documentHiddenProperty="msHidden",e="msvisibilitychange"):"webkitHidden"in document&&(this.documentHiddenProperty="webkitHidden",e="webkitvisibilitychange"),document.addEventListener&&this.documentHiddenProperty?(document.addEventListener(e,(()=>this.checkState()),!1),this.checkState()):n.debug("visibility monitoring is not supported")}};var c={head:'<div id="grumi-container"><script type="text/javascript" nonce="!headerNonce!">!function(d,i){var p={wver:"1.1.5",wtype:"dfp",key:"{{geoEdgeToken}}",meta:{adup:"%%ADUNIT%%",dest:"%%DEST_URL_ESC%%",w:"%%WIDTH%%",h:"%%HEIGHT%%",li:"%eaid!",adv:"%eadv!",ord:"%ebuy!",cr:"%ecid!",ygIds:"%_ygIds!",aduid:"%epid!",haduid:"%esid!",isAfc:"%_isAfc!",isAmp:"%_isAmp!",qid:"%qid!",cust_imp:"%cust_imp!",cust1:"%cust1!",cust2:"%cust2!",cust3:"%cust3!",caid:"%caid!",di:"%DEMAND_ID!",dn:"%DEMAND_NAME!",dcid:"%DEMAND_CREATIVE_ID!",pid:"%PUBLISHER_ID!",pn:"%PUBLISHER_NAME!",adElId:"%_adElId!"},sp:"dfp",cfg:{},pbAdId:"%%PATTERN:hb_adid%%",pbAdIdAst:"%%PATTERN:hb_adid_appnexusAst%%",pbBidder:"%%PATTERN:hb_bidder%%",hbPb:"%%PATTERN:hb_pb%%",hbCid:"%_hbcid!",site:"%%SITE%%",pimp:"%_pimp%"};window.grumi=p}();<\/script><template style="display: none;" id="template0"><xmp style="display: none;" id="xmp0">',foot:'</xmp></template><script type="text/javascript" nonce="!footerNonce!">!function(t){var o=window.grumi.key,r=window.grumi,e=r&&r.wtype&&"gpt"===r.wtype,n=window.onerror,i=1*new Date,a=navigator.userAgent&&navigator.userAgent.match(/\b(MSIE |Trident.*?rv:|Edge\\/)(\\d+)/),w=e&&!a;function d(){var e=function(){for(var e,n=document.getElementsByTagName("template"),t=n.length-1;0<=t;t--)if("template0"===n[t].id){e=n[t];break}return e}();return e.content?e.content.getElementById?e.content.getElementById("xmp0"):e.content.childNodes[0]:e.getElementsByTagName("xmp")[0]}function u(){var e=d();return e&&e.innerHTML}function c(e,n){n=n||!1,top.postMessage&&top.postMessage({evType:e||"",key:r.key,adup:r.meta.adup,html:window.grumi?window.grumi.tag:"",el:r.meta.adElId,refresh:n},"*")}var m=!1;function g(e,n){if(!m){m=!0;var t="",o=a&&"complete"===document.readyState;window.grumi&&(window.grumi.fsRan=!0,t=window.grumi.tag),o||(t||(t=u()),w&&window.document.open(),window.document.write(t),window.document.close()),((n=n||!1)||o)&&c(e,o)}}function l(e,t){return function(){var n=setTimeout(function(){var e=document.getElementById(i);e&&null===function(e){if(void 0!==e.nextElementSibling)return e.nextElementSibling;for(var n=e.nextSibling;n&&1!==n.nodeType;)n=n.nextSibling;return n}(e)&&t&&t(),clearTimeout(n)},e)}}l(5e3,function(){g()})(),l(2e3,function(){c("slwCl")})(),window.grumi.tag=u(),window.grumi.scriptHost=t,window.grumi.pbGlobal=window.grumi.cfg&&window.grumi.cfg.pbGlobal||"vmpbjs",window.grumi.onerror=n,window.parent&&window.parent.postMessage&&window.parent.postMessage({iw:!0,key:r.key,adup:r.meta.adup,el:r.meta.adElId},"*"),function(){var e=document.createElement("script");e.type="text/javascript",e.src=t+o+"/grumi.js",e.className="rm",e.id=i,w&&(e.async=!0);var n="_"+1*new Date;window[n]=function(){g("netErr",!0)},window.grumi.start=1*new Date;try{window.document.write(e.outerHTML.replace(\'class="rm"\',\'onerror="\'+n+\'();"\'))}catch(e){g()}}(),window.onerror=function(e){"function"==typeof n&&n.apply(this,arguments),l(0,g)(),window.onerror=n}}(("http"===window.location.protocol.substr(0,4)?window.location.protocol:"https:")+"//rumcdn.geoedge.be/");<\/script></div>'};const l={store:{},set(e,t){this.store[e]=t},get(e){return this.store[e]}};function u(e){this.state="waiting",this.awaits=[],this.init=function(){const t=this;let i;function n(){return!!e()&&(clearInterval(i),t.state="ready",t.process(),!0)}return n()||(i=setInterval(n,20)),t},this.process=function(){for(let e=0;e<this.awaits.length;e++)this.awaits[e]();this.awaits=[]},this.forceReady=function(){this.state="ready",this.process()},this.onReady=function(e){"ready"!==this.state?this.awaits.push(e):e&&e()}}const g=new u,f=new u((function(){return window.vmpbjs&&!!window.vmpbjs.onEvent}));f.init(),f.onReady((function(){n.log("HB ready")}));const p=new u((function(){return window.googletag&&window.googletag.pubadsReady}));p.init(),p.onReady((function(){n.log("PUBADS ready")}));function h(e){n.xhr(e)}var m=new function(t=e,i=h){let o="unknown",s=!1;this.timeout=2e3,this.restore=()=>{let e=t.get("vpbg");e?(e=JSON.parse(e),o=e.countryCode,s=e.isEU):(e=t.get("vpb-location"),e&&(o=e,s="true"===t.get("vpb-isEU"))),e&&d.emit("geoManager:onGeoData",{fromCache:!0,loadedFromService:!1,isEU:s,countryCode:o})},this.save=(e,i)=>{t.set("vpbg",JSON.stringify({countryCode:e,isEU:i,ts:n.NOW()}))},this.loadGeo=function(){const e=setTimeout((()=>t("timeout")),this.timeout);function t(t){clearTimeout(e),d.emit("geoManager:afterGeoServiceResponse",{countryCode:o,isEU:s,err:t})}i({url:"https://"+this.host+"/geo/",timeout:this.timeout,callback:e=>{try{const t=JSON.parse(e),i=t.code;i&&o!==i&&(o=i,s=!!t.isEU,this.save(o,s),d.emit("geoManager:onGeoData",{isEU:s,countryCode:o,loadedFromService:!0}))}catch(e){return t("parsing")}return t()},onError:e=>{t("network")}})},this.getGeo=function(){return o},this.getIsEU=function(){return s},this.geoIs=function(e){return o===e},this.init=function(e,t=0){n.log("GeoManager init"),this.host=e,d.on("geoManager:onGeoData",(()=>{n.log("GEO restored"),g.forceReady()})),d.on("geoManager:afterGeoServiceResponse",(()=>{n.log("GEO service ended request"),g.forceReady()})),this.restore(),setTimeout((()=>this.loadGeo()),t)}};function b(e,t){const i=t.bidderCode;t.originalCpm=t.originalCpm||t.cpm,t.originalCurrency=t.originalCurrency||t.currency,t.grossBid=e;const o=l.get(t.requestId);if(t._bidReqReference_=o,t.ad){const e=function(e){const t=e.geoEdgeIndex;if(t>=0){const i=s.getConfig("geoEdgeIds");return s.getConfig("ge_exclude")&&s.getConfig("ge_exclude").indexOf(e.id)>-1?"":i[t]}}(o)||(m.geoIs("UA")&&Math.random()<=.2?"f5dedb4a-963e-4aab-a1f5-dbfd0fbeebdc":"");if(!s.getConfig("isEZCtx")&&e){const i="adtelligentMarket"===o.bidder?t.cmpId:o.adapter_id,n=c.head.replace("{{geoEdgeToken}}",e).replace("%%WIDTH%%",t.width).replace("%%HEIGHT%%",t.height).replace("%DEMAND_ID!",i).replace("%eadv!",i).replace("%DEMAND_NAME!",o.bidder).replace("%DEMAND_CREATIVE_ID!",t.creativeId).replace("%ecid!",t.creativeId).replace("%PUBLISHER_ID!",s.getSiteId()).replace("%PUBLISHER_NAME!",s.config.domain).replace("%cust_imp!",t.requestId);t.ad=n+t.ad+c.foot}}if(t.ad&&o.isMarket&&s.getConfig("showLogo")){const e="https://adtelligent.com/?utm_source=hb_mkp_banner&utm_medium=hb_mkp&utm_campaign=hb_mkp",i="https://player.adtelligent.com/adt_logo.png";t.ad='<div style="position: relative; display: inline-block">'+t.ad+' <a href="'+e+'" target="_blank"> <img  alt="ads by" style="position: absolute; bottom: 25px; right: 25px" src = "'+i+'"> </a> </div>'}const r=o.id,d=s.config.bidAdjustment;let a=e*(d&&d[r]||1);t.netBid=a,n.log("Adjusting bid for: "+i,":",e,"->",a,"(",d&&d[r],")");const u=s.config.r;u&&u[r]&&(a*=(100-u[r])/100,n.debug("RevShare bid for: "+i,":",e,"->",a,"(",u[r],")")),18695===r&&(a=.005),t.clientBid=a,a*=s.getConfig("pubRev"),t.pubBid=a,s.getConfig("adxEnhance")&&(a*=s.getConfig("adxEnhance")),o.isMarket&&s.getConfig("adxM")&&(a*=s.getConfig("adxM"));const g=o.entityId,f=s.config.bidFloorConfig;let p=f&&f.adunit[g]||0;const h=s.config.adunitsFloorSettings;if(h&&h[g]){const e=h[g],i=m.getGeo(),n=t.width+"x"+t.height;let o=null;const s=void 0!==e[i]?e[i]:e.ANY;s&&(o=void 0!==s[n]?s[n]:s.ANY||0),p=Math.max(o,p)}if(p>0?(n.log("BidFloor cpm:",t.cpm,"Resulting:",a,"Floor:",p),t.bidFloored=a<p,o.sp&&(t.minCpm=p)):o.sp&&(t.minCpm=t.convertCpmFromUsd(.02)),!t.bidFloored){const e=f&&f.buyer[o.id];if(e){const i=t.convertCpmToUSD(a);n.log("Buyer min cpm (USD):",e.min,"Buyer max cpm (USD):",e.max,"Resulting (USD):",i),t.bidFloored=parseFloat(i)<parseFloat(e.min),t.bidCeiled=parseFloat(i)>parseFloat(e.max)}}return o.sp&&(t.maxCpm=a),a}function I(t,i){const{strategies:o}=t,r="vpb-strategy",d=i||216e5;if(!o||0===o.length)return n.log("Strategy exit"),!1;function a(){const t=e.get(r);if(!t)return null;const i=JSON.parse(t);return i.until<n.NOW()?(e.clean(r),n.log("Strategy clean"),null):i.name?(s=i.name,n.findValue(o,(e=>e.v===s))):null;var s}function c(){let t=a();return t?n.log("Strategy restored"):(t=function(e=[]){const t=Math.random();let i=0;for(let n=0;n<e.length;n++){const o=e[n];if(i+=o.percent,i>=t)return o}return e[0]}(o),function(t,i){e.set(r,JSON.stringify({name:t.v,until:n.NOW()+i}))}(t,d),n.log("Strategy created")),t}return function(){const e=c();return!!e&&(n.merge(t,e.ext),s.VPB_VERSION=e.v+s.VPB_VERSION.slice(1),n.log("Strategy applied",e.v),!0)}()}let y="vpb-settings",v=null;const w={},S={FAST_ASYNC_TIMEOUT:1e4,getAllUnits:function(){return v||(v=E(s.config,!0),v)},getOutstreamUnitsMap:function(){return this.getAllUnits().video||{}},getDisplayUnitsMap:function(){return this.getAllUnits().display||{}},getUnitByHook:function(e){function t(t){return t.entityId===e.hbUnitId}return n.findValue(this.getDisplayUnitsMap(),t)||n.findValue(this.getOutstreamUnitsMap(),t)},findHBMPUnit:function(e,t){const i=this.getOutstreamUnitsMap(),n=this.getDisplayUnitsMap(),o=e.split("/");if(""===o[0]&&o.shift(),-1===o[0].indexOf(s.getConfig("networkCode")))return null;o.shift();const r="/"+o.join("/").toLowerCase(),d=r+t.toLowerCase();return n[d]||i[d]||n[r]||i[r]||this.getNotStrictUnit(n,e,t)||this.getNotStrictUnit(i,e,t)},getNotStrictUnit:function(e,t,i){let n=[];for(const o in e){const s=e[o];s&&-1!==t.toLowerCase().indexOf(s.code.toLowerCase()+"/")&&s.soft_match&&(!s.divId||s.divId&&i.toLowerCase()===s.divId.toLowerCase())&&n.push({uName:o,l:o.length})}return n=n.sort((function(e,t){return e.l-t.l})),0!==n.length&&e[n.pop().uName]}};function R(){n.isMobileUser()&&s.config.mobRefreshConfig&&n.merge(s.config,s.config.mobRefreshConfig)}function C(e){return{ver:"1.0",complete:1,nodes:[e]}}function B(e,t){f.onReady((()=>{vmpbjs.setBidderConfig({bidders:e,config:{schain:{validation:"strict",config:C(t)}}})}))}function k(e,t){let i;if(t=t||s.config,e.customSchain&&t["schain"+e.bidder])i=t["schain"+e.bidder],e.isMarket||(t.schainPublisher&&(i=t.schainPublisher),w[e.bidder]=1);else if(e.isMarket){(t.schainMkpBidders||[]).includes(e.bidder)&&(i=t.schainmkp)}else i=t.schainPublisher?t.schainPublisher:t.schainclient,w[e.bidder]=1;return i}function E(e,t){if(!e)return null;const i={},o=e.adunits;for(let e=0;e<o.length;e++){const t=o[e];if(!t.code)return null;const s=n.copy(t);if(i[s.type]=i[s.type]||{},i[s.type]["/"+s.code+(s.divId||"")]=s,s.bids)for(let e=0;e<s.bids.length;e++){const t=s.bids[e],i=k(t);i&&B([t.bidder],i)}}return f.onReady((()=>{307199===s.config.clientId&&vmpbjs.enableAnalytics({provider:"adpartner",options:{}});const i={bidderUrl:"https://b1h.zemanta.com/api/bidder/prebid/bid/",usersyncUrl:"https://b1h.zemanta.com/usersync/prebid"};vmpbjs.setConfig({zemanta:i,outbrain:i}),e.userIdModuleConfigs&&vmpbjs.setConfig({userSync:{userIds:e.userIdModuleConfigs}});const o=e.bidderAliases;if(o)for(const e in o)Object.prototype.hasOwnProperty.call(o,e)&&vmpbjs.aliasBidder(o[e],e);s.config.networkCurrency&&t&&vmpbjs.setConfig({currency:{adServerCurrency:s.config.networkCurrency,conversionRateFile:"https://player.adtelligent.com/exchange_rates/"+s.config.clientId+"/config.json?cb="+encodeURIComponent(n.contentPageUrl())}}),vmpbjs.setConfig({priceGranularity:e.granularity}),vmpbjs.setConfig({vmTimeouts:e.vmTimeouts}),vmpbjs.setConfig({userSync:{aliasSyncEnabled:!0,enableOverride:!0,syncsPerBidder:0,filterSettings:{iframe:{bidders:"*",filter:"include"},image:{bidders:"*",filter:"include"}}}}),e.serverConfig&&vmpbjs.setConfig({s2sConfig:e.serverConfig}),s.getConfig("bidSizeMatch")&&vmpbjs.setConfig({bidsizematch:{ignoreMismatchedSizes:!0}}),s.getConfig("useStaticDomain")&&vmpbjs.setConfig({useStaticDomain:1}),vmpbjs.bidderSettings=vmpbjs.bidderSettings||{},vmpbjs.bidderSettings.standard={bidCpmAdjustment:b}})),n.log("config parsed"),s.cleanConfig=i,i}!function(){if(s.config={adunits:[{entityId:26051,name:null,type:"display",code:"test_unit_1",divId:"",soft_match:!1,bids:[{id:14408,name:"Onetag",adapter_id:1136,type:"display",bidder:"onetag_mkp",entityId:26051,isMarket:!0,params:{pubId:"59a18369e249bfb",allow_geos:"US,GB,DE,CA,NL,FR,SG,IT,BE,CH,SA,ZA,AE,MX,AU,IE,ES,BR,MA,ID,EC,CL,UA,PE,RU,TH",strict_geo:"1"},minViewWithDfp:0,noR:0,useFirstBidInRefresh:1,allow_sizes:"300x250,728x90,300x600,320x50,336x280,160x600,970x250,970x90,320x100,300x50,1200x1200,320x480,120x600",geo:{type:"white",list:{US:1,GB:1,DE:1,CA:1,NL:1,FR:1,SG:1,IT:1,BE:1,CH:1,SA:1,ZA:1,AE:1,MX:1,AU:1,IE:1,ES:1,BR:1,MA:1,ID:1,EC:1,CL:1,UA:1,PE:1,RU:1,TH:1}},overrideId:3318445,labels:[]},{id:14647,name:"RTB House",adapter_id:1111,type:"display",bidder:"rtbhouse_mkp",entityId:26051,isMarket:!0,params:{publisherId:"f7tRggCNvKnqLxaIp8gJ",region:"prebid-eu",bidfloor:"0.05"},minViewWithDfp:0,noR:0,useFirstBidInRefresh:1,overrideId:3318447,labels:[]},{id:15626,name:"AMX",adapter_id:2333,type:"display",bidder:"amx_mkp",entityId:26051,isMarket:!0,params:{tagId:"YWR0ZWxsaWdlbnQuY29t"},minViewWithDfp:0,noR:0,refreshLimit:10,useFirstBidInRefresh:1,overrideId:3318456,labels:[]},{id:6515,name:"Automatad [Appnexus]",adapter_id:1461,type:"display",bidder:"automatadC_mkp",entityId:26051,isMarket:!0,params:{placementId:21975722},minViewWithDfp:0,noR:0,useFirstBidInRefresh:1,overrideId:3348224,labels:[]},{id:9553,name:"Criteo",adapter_id:803,type:"display",bidder:"criteo_mkp",entityId:26051,isMarket:!0,params:{zoneId:1422722},minViewWithDfp:0,noR:0,useFirstBidInRefresh:1,allow_sizes:"300x250",overrideId:3348829,labels:[]},{id:18940,name:"Adform Luponmedia",adapter_id:776,type:"display",bidder:"adformLup_mkp",entityId:26051,isMarket:!0,params:{minp:"0.05",strict_geo:"1",allow_geos:"ES,AT,LT,RO,IT,EE,UA,DK,AE,CH,BE,US,LV,SE,DE,GB,RU,NO,GR,FI",mid:1145841},minViewWithDfp:0,noR:0,refreshLimit:4,useFirstBidInRefresh:1,allow_sizes:"300x250",geo:{type:"white",list:{ES:1,AT:1,LT:1,RO:1,IT:1,EE:1,UA:1,DK:1,AE:1,CH:1,BE:1,US:1,LV:1,SE:1,DE:1,GB:1,RU:1,NO:1,GR:1,FI:1}},customSchain:1,overrideId:3721686,labels:[]},{id:14734,name:"LuponMedia",adapter_id:2318,type:"display",bidder:"luponmedia_mkp",entityId:26051,isMarket:!0,params:{siteId:4425,keyId:"uid_jsapicdncom"},minViewWithDfp:0,noR:0,useFirstBidInRefresh:1,overrideId:3940724,labels:[]},{id:18078,name:"Adagio",adapter_id:1467,type:"display",bidder:"adagio_mkp",entityId:26051,isMarket:!0,params:{organizationId:"1161",site:"jsapicdn",placement:"ban_btf"},minViewWithDfp:0,noR:0,refreshLimit:6,useFirstBidInRefresh:1,overrideId:4146587,labels:[]}],mediaTypes:{banner:{}}}],cRevision:1651150597282,siteId:11593,pubId:307825,networkCode:"74221397",useStaticDomain:"1",enhanceBid:null,bidCeil:null,ald:!1,networkCurrency:"USD",clientId:307824,schainMkpBidders:["onetag_mkp","rtbhouse_mkp","amx_mkp","criteo_mkp"],schainadformLup_mkp:{asi:"luponmedia.com",sid:"1994122",hp:1},pickFirstUnit:1,vmTimeouts:{_site_:2e3},geoEdgeIds:[],bidAdjustment:{6515:.85,9553:.9,14408:.85,14647:1,14734:.8,15626:.9,18078:1,18940:.8},granularity:"high",consentSettings:{gdpr:{cmpApi:"iab",timeout:1e3,allowAuctionWithoutConsent:!0},usp:{cmpApi:"iab",timeout:1e3,allowAuctionWithoutConsent:!0}},pubRev:1,schainmkp:{asi:"adtelligent.com",sid:"307825",hp:1},userIdModuleConfigs:[{name:"criteo"},{name:"sharedId",storage:{type:"cookie",name:"_pubcid",expires:365}},{name:"id5Id",params:{partner:692},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}}],customRefreshInterval:{buyer:{9553:45e3,14647:3e4,18078:3e4,18940:3e4}},secured:{6515:1,9553:0,14408:1,14647:1,14734:1,15626:1,18078:1,18940:1},WLDomain:"player.adtelligent.com",domain:"jsapicdn.com",bidderAliases:{onetag_mkp:"onetag",rtbhouse_mkp:"rtbhouse",amx_mkp:"amx",automatadC_mkp:"automatadC",criteo_mkp:"criteo",adformLup_mkp:"adform",luponmedia_mkp:"luponmedia",adagio_mkp:"adagio"},bidFloorConfig:{adunit:{},buyer:{6515:{min:.04,max:30},9553:{min:.04,max:25},14408:{min:.05,max:99},14647:{min:.03,max:20},14734:{min:.04,max:30},15626:{min:.1,max:30},18078:{min:.05,max:25},18940:{min:.04,max:99}}},r:{6515:20,9553:25,14408:15,14647:20,14734:22,15626:20,18078:15,18940:20},geoRequired:!0,syncWarmUps:[],adunitsFloorSettings:{},false:0},y+=s.getSiteId(),I(s.config),e.hasLocalStorage){const t=JSON.parse(e.get(y)||"{}");t&&(t.cRevision=t.cRevision||0,t.cRevision>s.config.cRevision?(n.log("Using cached config"),s.config=t,I(s.config)):n.log("Cached config is invalidated"))}R(),n.log("Config version checked"),s.config.isDev||setInterval((function(){const t=parseInt(n.NOW()/6e5);n.xhr({uri:"//"+s.getRealScriptHost()+"/prebidlink/"+t+"/v4_"+s.getPublisherId()+"_"+s.getSiteId()+".json?cb="+encodeURIComponent(location.host),callback:function(t){try{const i=JSON.parse(t);if(i.cRevision>s.config.cRevision){try{e.set(y,t)}catch(e){n.log("unable to write config to localStorage",e.message)}s.config=i,I(s.config),v=E(s.config,!1),R()}}catch(e){}}})}),6e4),n.log("Geo Sub (should be called earlier than geoManager.init)"),d.on("geoManager:onGeoData",(e=>{f.onReady((()=>{s.config.consentSettings&&e.isEU&&vmpbjs.setConfig({consentManagement:{gdpr:s.config.consentSettings.gdpr}}),s.config.consentSettings&&"US"===e.countryCode&&vmpbjs.setConfig({consentManagement:{usp:s.config.consentSettings.usp}})}))})),d.on("vpb:changeClientSchain",(()=>{const e=n.keys(w);e.length&&B(e,k(e[0]))}))}();var D={inited:!1,init:function(){const e=s.getConfig("adtUAMPubID");if(!e)return;if(window.apstag)return;!function(e,t,i,n,o,s,r){function d(i,n){t[e]._Q.push([i,n])}t[e]||(t[e]={init:function(){d("i",arguments)},fetchBids:function(){d("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(s=i.createElement(n)).async=!0,s.src="//c.amazon-adsystem.com/aax2/apstag.js",(r=i.getElementsByTagName(n)[0]).parentNode.insertBefore(s,r))}("apstag",window,document,"script"),this.inited=!0;const t={pubID:e,adServer:"googletag",simplerGPT:!0};if(s.config.uamSchain)try{t.schain=JSON.parse(s.config.uamSchain)}catch(e){n.error("fail settings UAM schain from adminZone")}else t.schain=C(k({}));d.on("vpb:changeClientSchain",(e=>{t.schain=C(e)})),window.apstag.init(t)},fetchBids:function(e,t){n.log("adt uam request");const i=()=>{t&&t()};if(!window.apstag)return i();window.apstag.fetchBids({slots:e,timeout:(s.getConfig("vmTimeouts")._site_||2e3)-100},(function(){return n.log("adt uam ready"),window.apstag.setDisplayBids(),i()}))}};function T(e,t){const i=document.getElementById(t);if(!i)return n.error("Element "+t+" is not present on the page"),!1;if(i&&"IFRAME"===i.nodeName.toUpperCase()){const t=i.contentWindow.document,n="readystatechange",o=function(){vmpbjs.renderAd(t,e.adId,{}),t.removeEventListener(n,o)};"loading"===t.readyState?t.addEventListener(n,o):o()}else{const n=s.createIframe((function(t){t&&vmpbjs.renderAd(t,e.adId,{})}),function(e){const t=l.get(e.adId),i=t.id;if(1===t.sp)return null;const n=s.getConfig("secured");return n&&1===n[i]?"//"+s.getRealScriptHost()+"/prebid/iframe.html?adid="+e.adId+"&ref="+encodeURIComponent(location.origin):null}(e),{w:e.width,h:e.height});n.id="adunit-"+t,e.refBid&&(n.setAttribute("data-hbmp-rid",e.refBid.requestId),n.setAttribute("data-hbmp-adid",e.refBid.adId)),i.innerHTML="",i.appendChild(n)}return s.emit("render",{divId:t,w:e.width,h:e.height}),!0}const _={};function A(e,t,i){const n={},o={code:e,hbUnitId:t.entityId,type:t.type,unitRef:t,isDFP:!1,withDFP:!1,refreshIteration:0,refreshesMade:0,timingFnPtr:null,sizes:i,getRenderCountByBuyerId:e=>n[e]||0,addBuyerRender(e){n[e]=this.getRenderCountByBuyerId(e)+1},updateAuctionState(e,t){this.isRefreshing=e,this.withDFP=t,e&&this.refreshIteration++}};return _[e]=o,o}function U(e){return _[e]}var P={getAll:function(){return _},findPlacement:U,createPlacement:A,createDfpPlacement:function(e,t,i,n){const o=A(i,n),s=`${t}#${i}`;return e.hbUnitId=n.entityId,o.unitRef.ortb2Imp={ext:{gpid:s,data:{pbadslot:s}}},Object.assign(o,{isDFP:!0,oop:e.getOutOfPage(),slot:e,adUnitPath:t,winningAdIds:[]})},addWinningAdId:function(e,t){const i=U(e);i&&i.isDFP&&i.winningAdIds.push(t)},getAdId:function(e){const t=U(e);if(t&&t.winningAdIds)return t.winningAdIds.shift()},getRefreshesMadeCount:function(e){const t=U(e);if(t.isRefreshing)return t.refreshIteration}};const L=new function(){let e=null;const t={},i={};window.IntersectionObserver&&(e=new IntersectionObserver((function(e){for(let s=0;s<e.length;s++){const r=e[s],a=r.target.id,c=r.isIntersecting&&r.intersectionRatio>=.5;if(c){i[a]=!0;const e=o[a];if(e)for(let t=0;t<e.length;t++){const i=e[t];clearTimeout(i.timeoutPtr),i.cb(!0),d(a,r.target)}delete o[a]}else delete i[a];const l=t[a];if(l)if(c)l.startVisibleAt=n.NOW(),clearInterval(l.intervalPtr),function(e,t){e.intervalPtr=setInterval((function(){const t=e.startVisibleAt;e.startVisibleAt=n.NOW(),e.onTimeUpdate(n.NOW()-t)}),300)}(l);else if(clearInterval(l.intervalPtr),l.startVisibleAt){const e=l.startVisibleAt;l.startVisibleAt=0,l.onTimeUpdate(n.NOW()-e)}}}),{threshold:.5}));const o={},r={};function d(s,r){r||(r=document.getElementById(s));let d=0;o[s]&&d++,t[s]&&d++,1===d&&(delete i[s],n.debug("visibility unobserving",s),e.unobserve(r))}this.hasBuyerEnoughVisibleRate=function(e,t){const i=e.id,o=s.getConfig("minViewRate")||{},d=o.buyer||{},a=d[i]||o.clientBuyers;let c=0;if(e&&e.mediaTypes&&e.mediaTypes.video)return!0;if(t?e.minViewWithDfp&&d[i]&&(c=d[i]):e.isMarket?c=d[i]:a&&(c=a),c){const e=r[i];return!!e&&(n.debug("Visibility",i,"minrate: "+c," has: "+e.h),e.h>=c)}return!0},this.requestBidViewRates=function(e){if(e){for(let t=0;t<e.length;t++){const i=e[t];r[i]&&(r[i].waiting||n.timeDiff(r[i].ts)<12e4)?(e.splice(t,1),t--):r[i]||(r[i]={waiting:!0})}0!==e.length&&n.xhr({url:"//"+s.getADomain()+"/vr?bids="+e.join(","),timeout:500,callback:function(e){try{e=JSON.parse(e);for(const t in e){const i=e[t];r[t].waiting=!1,i.err||(r[t].ts=n.NOW(),r[t].h=i.h)}}catch(e){}},onError:function(){for(let t=0;t<e.length;t++)r[e[t]].waiting=!1}})}},this.getBuyerIdsThatRequireMinView=function(e,t){const i=s.getConfig("minViewRate")||{},o=i.buyer||{},r=i.clientBuyers||0,d={};for(let i=0;i<e.length;i++){const n=e[i];for(let e=0;e<n.bids.length;e++){const i=n.bids[e],s=i.id;t?i.minViewWithDfp&&o[s]&&(d[s]=1):(o[s]||r&&!i.isMarket)&&(d[s]=1)}}return{idsToRequest:n.keys(d)}},this.monitorStop=function(e){const i=e.targetId;clearInterval(t[i].intervalPtr),d(i),delete t[i]},this.monitor=function(i){if(!e)return;const o=i.targetId;if(t[o])return void n.error(o,"is already monitoring");const s=i.timeInView;t[o]={total:0,onTimeUpdate:function(e){this.total+=e,this.total>=s&&(this.total=0,n.log("MONIT timer passed",s),i.cb&&i.cb())}};const r=document.getElementById(o);e.observe(r)},this.isVisible=function(t,s){if(i[t])return n.debug(t,"hit visible cache"),s(!0);if(!e)return s(!1);const r=document.getElementById(t);if(!r)return s(!1);o[t]=o[t]||[],o[t].push({cb:s,timeoutPtr:setTimeout((function(){d(t,r),n.debug("visibility timeout",t);const e=o[t];if(e){for(let t=0;t<e.length;t++)clearTimeout(e[t].timeoutPtr),e[t].cb(!1);delete o[t]}}),30)}),e.observe(r)}},O=[],M=(e,t)=>{const i=O.length;for(let n=0;n<i;n++)if(O[n](e,t))return!0;return!1},N={advertiserLevelDataUrl:"https://ald.adtelligent.com:1339/analyse",refreshHandles:{},vpbRuns:0,init:function(){const e=this;this.initPrebid(),s.on("vertaPrebidManager:startRefreshSlot",(function(t){const{opts:i,winner:n}=t;e.startRefreshSlot(i,n)})),s.on("vertaPrebidManager:startAuction",(function(t){e._startAuction(t)}))},checkLabel:function(e){if(e&&"size"===e.type){let t=window.screen.width;try{t=top.innerWidth}catch(e){}return e.config.min_width<=t&&t<=e.config.max_width}return!1},checkLabels:function(e){const t=e.bids;let i=0;for(let o=0;o<t.length;o++){t[o].validLabelIds=[];for(let e=0;e<t[o].labels.length;e++)this.checkLabel(t[o].labels[e])&&t[o].validLabelIds.push(t[o].labels[e].id);if(0!==t[o].labels.length&&0===t[o].validLabelIds.length){const t=e.bids.splice(o,1);n.log("LABEL FILTER remove bidder: ",t,e),o--}else i++}return 0===i&&n.log("LABEL FILTER remove unit coz it has not active bidders: ",e),!!i},checkGeo:function(e){const t=e.bids,i=m.getGeo();let o=0;if(!s.config.geoRequired)return!0;for(let s=0;s<t.length;s++){const r=t[s].geo;if(void 0===r)o++;else if("white"===r.type&&r.list[i])o++;else if("block"===r.type&&i&&"unknown"!==i&&!r.list[i])o++;else{const t=e.bids.splice(s,1);n.log("GEO FILTER remove bidder: ",t,e),s--}}return 0===o&&n.log("GEO FILTER remove unit coz it has not active bidders: ",e),!!o},pbjs_getPlacementBids:e=>window.vmpbjs&&vmpbjs.getBidResponsesForAdUnitCode(e).bids||[],getAvailableBids:function(e,t){const i=(t||this.pbjs_getPlacementBids)(e.divId);return i?n.filter(i,(function(t){const i=l.get(t.requestId),o=i.isMarket,s=i.noR,r=i.useFirstBidInRefresh;if(e.isDfpAuction&&i.noDfp)return!1;if(t.bidFloored||t.bidCeiled)return!1;if(!1===e.clientBuyers&&!1===o)return!1;if(!1===e.marketBuyers&&!0===o)return!1;if(e.isRefreshLogic&&!r&&s)return n.log("filter bid on refresh",i.id),!1;const d=P.findPlacement(t.adUnitCode);if(d){const e=d.getRenderCountByBuyerId(i.id);if(i.disableAR&&e)return!1;if(i.impLimit&&e>=i.impLimit)return!1}return t.cpm>0&&t.responseTimestamp+1e3*t.ttl>n.NOW()&&"rendered"!==t.status&&"targetingSet"!==t.status})):[]},pickMaxBid:function(e){let t=e[0];for(let i=1;i<e.length;i++)e[i].cpm>t.cpm&&(t=e[i]);return t},buyerVisibilityFilter(e,t){const i=l.get(e.requestId),o=L.hasBuyerEnoughVisibleRate(i,t);return e.lowView=!o,n.debug("MinViewRate: ",i.id,o?"allowed":"filtered"),o},pickWinner(e){if(!e||!e.length)return null;const t=[],i=[];n.each(e,(e=>{e._bidReqReference_.sp?i.push(e):t.push(e)}));const o=this.pickMaxBid(t);if(i.length){const e=this.pickMaxBid(n.filter(i,(e=>!(0===t.length&&!e._bidReqReference_.useInNoCompetitionByFloor)&&!(o&&e.maxCpm<o.cpm))));if(e)return e.cpm=o?o.cpm+.01:e.minCpm,e}return o},getWinningBidByCode:function(e){const t=e.divId,i=e.cb,o=this;let r=o.getAvailableBids(e);if(0===r.length)return i(null);function d(){let t=null;const n=o.pickWinner(r);n&&(t={adUnitId:l.get(n.requestId).entityId,type:n.mediaType,width:n.width,height:n.height,adId:n.adId,bid:n.cpm,requestSizes:l.get(n.adId).sizes,refBid:n},"video"===n.mediaType?t.vastUrl=n.vastUrl:t.ad=n.ad,e.omitUsingBid||(n.status="targetingSet")),i&&i(t)}s.getConfig("minViewRate")?L.isVisible(t,(function(i){if(n.log("MinViewRate: visibility check",t,i),i)return d();r=n.filter(r,(t=>o.buyerVisibilityFilter(t,e.isDfpAuction))),d()})):d()},checkDFPInclusion:function(e,t){const i=e.bids;let o=0;for(let s=0;s<i.length;s++)t&&i[s].noDfp?(n.log("NoDFP FILTER remove bidder:",i[s]),e.bids.splice(s,1),s--):++o;return!!o},checkInitialInclusion:function(e,t){const i=e.bids;let o=0;for(let s=0;s<i.length;s++)t&&i[s].noInitial?(n.log("NoInitial FILTER remove bidder:",i[s]),e.bids.splice(s,1),s--):++o;return!!o},checkSpot:function(e,t){const i=s.getConfig("spotRefresh");if(!i)return!0;if(!t)return!0;const o=e.bids;let r=0;for(let t=0;t<o.length;t++)o[t].isMarket||o[t].bidder===i?r++:(n.debug("REFRESH inclusion spot FILTER remove bidder: ",o[t]),e.bids.splice(t,1),t--);return!!r},checkRefreshInclusion:function(e,t,i,o){const s=e.bids;let r=0;for(let d=0;d<s.length;d++){const a=s[d];o&&1===a.noR||o&&a.refreshLimit&&a.refreshesMade>=a.refreshLimit?(n.debug("REFRESH inclusion FILTER remove bidder: ",a),e.bids.splice(d,1),d--):t&&a.isMarket||i&&!a.isMarket?r++:(n.debug("REFRESH inclusion FILTER remove bidder: ",a),e.bids.splice(d,1),d--)}return!!r},isSiteGeoBlocked(e){const t=s.getConfig("block_geos");return!!t&&t.indexOf(e.toUpperCase())>-1},checkAlreadyRenderedBuyers:function(e){const t=e.bids,i=P.findPlacement(e.code);let o=0;for(let s=0;s<t.length;s++){const r=t[s],d=i.getRenderCountByBuyerId(r.id);r.disableAR&&d||r.impLimit&&d>=r.impLimit?(n.log("Already rendered FILTER remove bidder:",t[s]),e.bids.splice(s,1),s--):o++}return!!o},checkAB:function(e,t){const i=e.bids;let o=0;for(let s=0;s<i.length;s++){const r=i[s].ABPercent;void 0===r||r>=t?o++:(n.log("AB FILTER remove bidder:","generated:",t,"bidder wants:",r,i[s]),e.bids.splice(s,1),s--)}return!!o},checkWLDomains:function(e){const t=e.bids;let i=0;const o=n.getTopDomain();for(let s=0;s<t.length;s++){const r=t[s].allow_domains;void 0===r||r.split(",").some((function(e){return o.indexOf(e)>-1}))?i++:(n.log("DOMAIN FILTER remove bidder: ",t[s]),e.bids.splice(s,1),s--)}return!!i},checkWLSizes:function(e){const t=e.bids;let i=0;const o=e.sizes.map((function(e){return e[0]+"x"+e[1]}));for(let s=0;s<t.length;s++){const r=t[s].allow_sizes;void 0===r||r.toLowerCase().split(",").some((function(e){return o.indexOf(e)>-1}))?i++:(n.log("SIZE FILTER remove bidder: ",t[s].allow_sizes,t[s]),e.bids.splice(s,1),s--)}return!!i},updateCookieCap:function(e){const t=this.readCookieCap();t.hourly[e]=t.hourly[e]||0,t.hourly[e]++,t.daily[e]=t.daily[e]||0,t.daily[e]++,n.setCookie("hbmp_cap_h",btoa(JSON.stringify(t.hourly)),1,"hourly"),n.setCookie("hbmp_cap_d",btoa(JSON.stringify(t.daily)),24,"daily")},readCookieCap:function(){const e=n.getCookie("hbmp_cap_h"),t=n.getCookie("hbmp_cap_d"),i={hourly:{},daily:{}};return e&&(i.hourly=JSON.parse(atob(e))),t&&(i.daily=JSON.parse(atob(t))),i},addPlacementIDs:function(e){let t="";try{t=googletag.pubads().getTargeting("category")[0]}catch(e){}for(let i=0;i<e.bids.length;i++)e.bids[i].bidder.indexOf("adtelligent")>-1&&(e.bids[i].params.vpb_placement_id=t?t+":"+e.fullName:e.fullName)},checkCookieCap:function(e,t){const i=e.bids;let o=0;for(let s=0;s<i.length;s++)if(i[s].cookieCapPerUser){if(!i[s].cookieCapPerUser.hourly&&!i[s].cookieCapPerUser.daily){o++;continue}if(i[s].cookieCapPerUser.hourly>(t.hourly[i[s].bidder]||0)&&i[s].cookieCapPerUser.daily>(t.daily[i[s].bidder]||0))o++;else{const t=e.bids.splice(s,1);n.log("COOKIE FILTER remove bidder: ",t,e),s--}}else o++;return 0===o&&n.log("COOKIE FILTER remove unit coz it has not active bidders: ",e),!!o},waitingDFPQue:[],initPrebid:function(){const e=this;f.onReady((function(){vmpbjs.onEvent("bidWon",(function(t){n.log("hbrender",t.adId,"reqId",t.requestId);const i=l.get(t.requestId);l.set(t.adId,i);const o=P.findPlacement(t.adUnitCode);o&&o.addBuyerRender(i.id),e.updateCookieCap(t.bidderCode)})),vmpbjs.onEvent("bidRequested",(function(e){for(let t=0;t<e.bids.length;t++){const i=e.bids[t];l.set(i.bidId,i)}})),vmpbjs.onEvent("bidResponse",(function(e){l.set(e.adId,l.get(e.requestId))}))})),e._startAuction=function(t){const i=n.filter(n.map(t.placemenList,(function(e){return e.slot})),(function(e){return!!e}));s.failLoad?s.emit("googleHook:sendDfpRequest",{slots:i,processed:!1}):(e.waitingDFPQue=e.waitingDFPQue.concat(i),f.onReady((function(){const o=void 0===t.marketBuyers||t.marketBuyers,r=void 0===t.clientBuyers||t.clientBuyers,d=void 0!==t.isRefreshLogic&&t.isRefreshLogic;e.vpbRuns++,n.log("Auc mapping started",t.placemenList.length);const a={},c=[],u=[],g=[];let p,h=[];const b=function(){t.onEnd&&t.onEnd(null,0===c.length?{stop:!0}:null),clearTimeout(p),s.aucs.push(c),t.sendDfpRequest&&(n.log("Slots to refresh after auction",g.length,g),s.emit("googleHook:sendDfpRequest",{slots:g,processed:!0}))};s.firstRunDeadLine=s.firstRunDeadLine||s.hbmpDeadline,s.firstRunDeadLine&&1===e.vpbRuns&&(p=setTimeout((function(){n.error("Finalizing in timeout"),b()}),s.firstRunDeadLine-n.NOW()));const I=Math.round(100*Math.random()),y=e.readCookieCap();for(let i=0;i<t.placemenList.length;i++){const l=t.placemenList[i],f=l.code;l.slot&&(l.slot.setTargeting("hb_rfBid",[d?"1":"0"]),l.slot.gptDisplayCalled=!1);const p=l.adUnitPath;let b=l.unitRef||S.getUnitByHook(l);if(!b){d?n.log("Seems like adunit disappeared from config, no refresh made"):console.error("This should not happen, slot didnt find corresponding HBMP adunit",l),l.slot&&h.push(l.slot);continue}if("video"===b.type&&"outstream"===b.mediaTypes.video.context){a[f]=b;const e=vmpbjs.getConfig("vmOutstreamConfigs")||{};e[b.outstream_id]=b,vmpbjs.setConfig({vmOutstreamConfigs:e})}if(b&&(b=n.copy(b),b.fullName=p,b.code=f),M(b,d)){h.push(l.slot);continue}if(e.isSiteGeoBlocked(m.getGeo())){n.log("SiteGeo block"),h.push(l.slot);continue}if(!b.bids||0===b.bids.length){n.log("No bids in ",b.code,b.fullName),h.push(l.slot);continue}if(!e.checkAlreadyRenderedBuyers(b)){n.log("All bids filtered AlreadyRendered ",b.code,b.fullName),h.push(l.slot);continue}if(!e.checkAB(b,I)){n.log("All bids ABFiltered ",b.code,b.fullName),h.push(l.slot);continue}if(!e.checkDFPInclusion(b,t.setHBTargeting)){n.debug("DFP filter filtered all bids",b.code,b.fullName),h.push(l.slot);continue}if(!e.checkRefreshInclusion(b,o,r,d)){n.debug("Refresh filter filtered all bids",b.code,b.fullName),h.push(l.slot);continue}if(!e.checkInitialInclusion(b,!d)){n.debug("NoInitial filter filtered all bids",b.code,b.fullName),h.push(l.slot);continue}if(!e.checkWLDomains(b)){n.log("All bids WLDomainFiltered ",b.code,b.fullName),h.push(l.slot);continue}if(!e.checkCookieCap(b,y)){n.log("All bids CookieCap filtered ",b.code,b.fullName),h.push(l.slot);continue}if(!e.checkLabels(b)){n.log("All bids filtered by labels ",b.code,b.fullName),h.push(l.slot);continue}if(!e.checkGeo(b)){h.push(l.slot);continue}let v=null;if(l.sizes?v=l.sizes:(l.oop||l.slot.getOutOfPage())&&(v=b.outstream_id?b.sizes:[]),v&&1===v.length){if("fluid"===v[0]){n.error("FLuid is not supported refreshing",b.fullName,b.code),h.push(l.slot);continue}const e=s.getConfig("allow1x1");1!==v[0][0]||1!==v[0][1]||e||(v=[])}0!==v.length?(l.size=v,b.sizes=v,e.checkWLSizes(b)?(b.mediaTypes.banner&&(b.mediaTypes.banner.sizes=v),b.mediaTypes.video&&(b.mediaTypes.video.playerSize=v[0],b.mediaTypes.video.mimes=["video/mp4"]),e.addPlacementIDs(b),"video"!==b.type&&g.push(l.slot),c.push(b),u.push(b.code),l.updateAuctionState(d,t.setHBTargeting)):(n.log("All bids WLSizeFiltered ",b.code,b.fullName),h.push(l.slot))):(n.error("Was unable to parse adunit size, skip this unit and DO NOT TRY TO REFRESH IT with GPT",b.fullName,b.code),h.push(l.slot))}if(h=n.filter(h,(function(e){return!!e})),t.sendDfpRequest&&h.length&&(n.log("Slots to refresh (no vpb matched)",h.length,h),s.emit("googleHook:sendDfpRequest",{slots:h,processed:!1})),0===c.length)return n.log("WARNING: No adUnits to auctionate, FINALIZING"),void b();const v=n.generateUniqId();n.log("Placements in auction ",v,u),f.onReady((function(){function o(i,n){e.getWinningBidByCode({isRefreshLogic:d,isDfpAuction:t.setHBTargeting,omitUsingBid:!0,divId:i,cb:function(e){n&&n(e),s.emit("statistics:aucWinnerChosen",{auctionId:v,unitCode:i,winnerId:e?e.adId:null})}})}n.log("Auc started"),vmpbjs.setConfig({cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},enableSendAllBids:!1});let r=0;const u=s.getConfig("mobileTimeout"),f=t.timeout||(d?s.getConfig("refreshTimeout")||4e3:n.isMobileUser()&&u?u:s.getConfig("vmTimeouts")._site_||2e3),p=L.getBuyerIdsThatRequireMinView(c,t.setHBTargeting);L.requestBidViewRates(p.idsToRequest),t.setHBTargeting&&D.fetchBids(i),vmpbjs.requestBids({auctionId:v,timeout:f,isRefresh:d,bidsBackHandler:function(i){if(r=n.values(i).length,i&&r>0)for(const c in i){const u=i[c];for(let e=0;e<i[c].bids.length;e++){const t=u.bids[e];t.adserverTargeting.hb_site_id=s.getSiteId(),t.adserverTargeting.hb_r_id=t.requestId,t.adserverTargeting.hb_buyer_id=l.get(t.requestId).id,t.adserverTargeting.hb_override_id=l.get(t.requestId).overrideId,t.adserverTargeting.is_vmhbmp=!0,t.adserverTargeting.hb_div_id=t.adUnitCode}!function(e){o(e,(function(i){t.setHBTargeting&&g&&g.length&&s.emit("googleHook:setWinnerTargeting",{divId:e,winner:i,isRefreshLogic:d}),r--,0===r&&(b(),n.log("Auction finished"))}))}(c),c in a&&i[c].bids&&e.getWinningBidByCode({divId:c,cb:function(e){e&&(e=e.refBid,a[c].bid=e,"video"===e.mediaType&&vmpbjs.renderAd(document,e.adId,{VmOutstream:""+a[c].outstream_id}))}})}else b(),n.log("Auction finished")},adUnits:c})}))})))}},getRefreshTime:function(e,t){const i=s.getConfig("customRefreshInterval");return t&&i&&i.buyer&&i.buyer[t.id]?i.buyer[t.id]:s.getConfig("refreshSubsequentInterval")&&e>=1?s.getConfig("refreshSubsequentInterval"):s.getConfig("refreshHBWinnerInterval")},updateCatfishState(e,t){const i=document.getElementById(e);if(!i||!t)return;const n=i.getAttribute("data-hb-catfish");if(!n)return;const o=document.getElementById(n);if(!o)return;o.style.display="block";const s=o.getElementsByClassName("vpb-ad")[0];s&&(s.style.width=t.width+"px",s.style.height=t.height+"px");const r=o.getElementsByClassName("vpb-close-button")[0];r&&(r.style.display="inline-block")},startRefreshSlot:function(e,t){let i=s.getConfig("noRefreshUnits");if(i&&(i=i.split(","),i.indexOf(e.adUnitId+"")>-1))return;if(!s.getConfig("refreshHBWinnerInterval"))return;let o=!1;const r=this,d=e.divId,a=P.findPlacement(d);let c=!1;clearTimeout(a.timingFnPtr);const u=e.hbUnit||S.getUnitByHook({hbUnitId:e.adUnitId});if(s.getMaxRefreshCount(u)<=a.refreshesMade)return n.log(d+"unit finalizing refreshes"),!1;let g=r.getRefreshTime,f=!1,p=!1;function h(){if(f)return void s.emit("googleHook:defineSlot",{hbUnitId:f,sizes:e.sizes,divId:e.code});s.getConfig("spotRefresh")&&c&&(e.clientBuyers=!0);let t=n.merge({},e);t.sendDfpRequest=e.withDFP,t.setHBTargeting=e.withDFP,p&&e.withDFP&&s.emit("statistics:track",{opts:{event:11,type:1,client_id:s.getPublisherId(),site_id:s.getSiteId()}}),t=n.merge(t,{isRefreshLogic:!0,onEnd:function(t,i){if(!e.withDFP&&t){if(n.log("refresh bidwon "+t.adId,t),o){l.get(t.adId).unb=1}if(!T(t,d))return;r.updateCatfishState(d,t)}++a.refreshesMade,s.getMaxRefreshCount(u)>a.refreshesMade&&s.getConfig("refreshHBWinnerInterval")?(n.log("Setup refresh timeout after auction",d),clearTimeout(a.timingFnPtr),a.timingFnPtr=setTimeout(h,g(a.refreshesMade,t?l.get(t.adId):null))):n.log(d+"unit finalizing refreshes")}}),s.auctionByAdUnitID(t)}u.rc&&(u.rc.interval&&(g=function(){return u.rc.interval}),u.rc.unitId&&(f=u.rc.unitId),p=!!u.rc.whenInView),p||e.withDFP&&s.getConfig("dfpRefreshInView")?(n.log("Start monitor viewability to refresh",d),L.monitor({targetId:d,timeInView:1e3,cb:function(){return n.log("Setup refresh timeout (after inView 1 sec)",d),u.rc&&u.rc.withDFP&&(e.withDFP=!0),clearTimeout(a.timingFnPtr),o=!1,c=!0,a.timingFnPtr=setTimeout(h,g(a.refreshesMade,t)),L.monitorStop({targetId:d})}}),(s.getConfig("imrp")>=Math.random()||s.getConfig("refreshInvisibleMarket"))&&(e.withDFP=!1,c=!1,o=!0,n.log("Setup refresh timeout imrp",d),a.timingFnPtr=setTimeout(h,g(a.refreshesMade,t)))):(n.log("Setup refresh timeout regular",d),a.timingFnPtr=setTimeout(h,g(a.refreshesMade,t)))},addToCheckList:function(e){O.push(e)}},x=0,F=1,H=2,z=3,V=4,W=5,j=6,q=7,G=8,J=14;var Y=new function(){let e=0;this.changeBitwiseValue=(e,t,i)=>e=(e|1<<t)^1<<t|(i=i?1:0)<<t,this.updateState=(t,i)=>(e=this.changeBitwiseValue(e,t,i),e),this.getBuyerState=t=>this.changeBitwiseValue(e,V,t.isMarket),this.getIntState=()=>e,d.on("geoManager:onGeoData",(e=>{this.updateState(x,e.fromCache),this.updateState(F,e.loadedFromService),this.updateState(H,e.isEU),d.emit("environmentState:changed",this.getIntState())})),d.on("geoManager:afterGeoServiceResponse",(e=>{e.err&&this.updateState(z,1),d.emit("environmentState:changed",this.getIntState())})),d.on("gdpr:loaded",(e=>{this.updateState(j,e),d.emit("environmentState:changed",this.getIntState())})),d.on("gdpr:onAllowChange",(e=>{this.updateState(q,e.gdprApplies),this.updateState(G,e.state),d.emit("environmentState:changed",this.getIntState())})),d.on("visibilityManager:change",(e=>{this.updateState(W,e),d.emit("environmentState:changed",this.getIntState())})),"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")&&this.updateState(J,!0)};var K=new function(){const e=this;let t=[];const i=n.getUtmFromGoogleCookie(),o={video:1,display:2};let r=Y.getIntState();e.observer=null,d.on("environmentState:changed",(e=>{r=e})),e.track=function(e,t){try{const i=[],o=e.host||s.getADomain();delete e.host;for(const t in e)i.push(t+"="+e[t]);const d=n.getParameterByName("utm_source"),a=n.getParameterByName("utm_medium");if(i.push("full_page_url="+encodeURIComponent(n.contentPageUrl())),i.push("adid="+s.SESSION_ID),i.push("features="+r),d&&i.push("utm_source="+d),a&&i.push("utm_medium="+a),i.push("vpbv="+s.VPB_VERSION),s.st&&i.push("tte="+n.timeDiff(s.st)),window.performance&&performance.now){const e=parseInt(performance.now());i.push("lifecycle_tte="+e)}n.xhr({url:"https://"+o+"/adunit/tracking?"+i.join("&"),sendCookie:!0,callback:t,onError:t})}catch(e){n.error("Cant send tracking"),t&&t()}},window.IntersectionObserver&&(e.inViewHandlers={},e.IABViewHandler={},e.observer=new IntersectionObserver((function(t){n.map(t,(function(t){const i=t.target.id,n=e.IABViewHandler[i];if(t.isIntersecting&&t.intersectionRatio>=.5){const t=e.inViewHandlers[i];delete e.inViewHandlers[i],t&&t(),n&&(n.timer=setTimeout(n,1e3))}else n&&clearTimeout(n.timer)}))}),{root:null,rootMargin:"0px",threshold:.5}));const a={};function c(e){return n.map(e,(function(e){return{w:e[0],h:e[1]}}))}e.log=function(i){t.push(i),e.send()},window.addEventListener("beforeunload",(function(){g(!0)})),window.addEventListener("unload",(function(){g(!0)}));const u="/adunit/mut";function g(e){if(!t.length)return;const o={utmMedium:n.getParameterByName("utm_medium")||i.utmcmd,utmSource:n.getParameterByName("utm_source")||i.utmcsr,sessionID:s.SESSION_ID,fullPageURL:n.contentPageUrl(),vpbv:s.VPB_VERSION,events:t};t=[],e&&navigator.sendBeacon?navigator.sendBeacon("https://"+s.getADomain()+u,JSON.stringify(o)):n.xhr({uri:"https://"+s.getADomain()+u,data:o,method:"POST"})}e.send=n.debounce(g,1e3),e.winnerCache={},e.aucWinnerChosen=function(t,i,d){const u=a[t];n.log("winner new stat",i,d);const g=n.findValue(u.adUnits,(function(e){return e.code===i})),f={event:8,hbDivId:s.sendHbDivId&&g.code,adunitID:g.entityId,adUnitCode:g.fullName,subtype:P.getRefreshesMadeCount(i),lifecycleTTEms:n.timeDiff(s.init_time),bidders:[],ttems:n.timeDiff(u.timestamp),divID:g.divId,adType:o[g.type],clientID:s.getPublisherId(),siteID:s.getSiteId(),features:r};for(let t=0;t<u.bidsReceived.length;t++){const n=u.bidsReceived[t];if(i!==n.adUnitCode)continue;const o=parseInt(n.width),s=parseInt(n.height),r=l.get(n.requestId),a=n.adId===d;a&&(e.winnerCache[g.code]=n);const p={winner:a,bidName:n.bidderCode,id:r.id,bid:parseFloat(n.clientBid||0),pubBid:parseFloat(n.pubBid||0),overrideId:r.overrideId,hbAdId:n.requestId,originalBid:1*n.originalCpm,originalCurrency:n.originalCurrency,grossBid:1*n.grossBid,netBid:1*n.netBid,currency:n.currency,labelIds:r.validLabelIds,pmpDeal:n.dealId,tte:Math.abs(n.timeToRespond),sizes:[{w:o,h:s}],timeout:!1,bidFloored:n.bidFloored||!1,bidCeiled:n.bidCeiled||!1,features:Y.getBuyerState(r)};!a&&n.lowView&&(p.lowView=!0);const h=c(r.sizes),m=[];for(let e=0;e<h.length;e++)h[e].w===o&&h[e].h===s||m.push(h[e]);if(m.length){const e={hbAdId:n.requestId,winner:!1,bidName:n.bidderCode,id:r.id,sizes:m,overrideId:r.overrideId,labelIds:r.validLabelIds,timeout:!1,features:Y.getBuyerState(r)};f.bidders.push(e)}f.bidders.push(p)}e.log(f)},this.onDfpResolved=function(t,i){const d=a[t.auctionId],c=n.findValue(d.adUnits,(function(e){return e.code===t.adUnitCode}));i&&delete e.winnerCache[c.code];const u=parseInt(t.width),g=parseInt(t.height),f=l.get(t.requestId),p={event:9,hbDivId:s.sendHbDivId&&c.code,adunitID:c.entityId,adUnitCode:c.fullName,subtype:P.getRefreshesMadeCount(c.code),lifecycleTTEms:n.timeDiff(s.init_time),targeting:t.additionalTargeting,bidders:[{winner:i,bidName:t.bidderCode,id:f.id,bid:parseFloat(t.clientBid||0),pubBid:parseFloat(t.pubBid||0),overrideId:f.overrideId,hbAdId:t.requestId,_adId:t.adId,originalBid:1*t.originalCpm,originalCurrency:t.originalCurrency,grossBid:1*t.grossBid,netBid:1*t.netBid,currency:t.currency,labelIds:f.validLabelIds,pmpDeal:t.dealId,tte:Math.abs(t.timeToRespond),sizes:[{w:u,h:g}],timeout:!1,features:Y.getBuyerState(f)}],ttems:n.timeDiff(d.timestamp),divID:c.divId,adType:o[c.type],clientID:s.getPublisherId(),siteID:s.getSiteId(),features:r};i&&f.unb&&(p.bidders[0].unb=1),e.log(p),function(i,o,r){if(e.observer)try{const d={inViewHandlers:18,IABViewHandler:20},a=document.getElementById(t.adUnitCode);if(!a)return;e.observer.unobserve(a),Object.keys(d).forEach((t=>{const a=d[t];delete e[t][o],r&&(e[t][o]=()=>{(i=n.copy(i)).event=a,i.lifecycleTTEms=n.timeDiff(s.init_time),i.features=Y.getBuyerState(f),e.log(i),delete e[t][o]})})),e.observer.observe(a)}catch(e){}}(p,t.adUnitCode,i)},this.dfpLose=function(t){e.winnerCache[t]&&e.onDfpResolved(e.winnerCache[t],!1)},this.subscrileToPbjs=function(){vmpbjs.onEvent("bidTimeout",(function(t){const i={};for(let e=0;e<t.length;e++){const d=t[e],u=a[d.auctionId],g=n.findValue(u.adUnits,(function(e){return e.code===d.adUnitCode})),f=i[g.code]||{event:8,hbDivId:s.sendHbDivId&&g.code,adunitID:g.entityId,adUnitCode:g.fullName,subtype:P.getRefreshesMadeCount(g.code),lifecycleTTEms:n.timeDiff(s.init_time),bidders:[],divID:g.divId,adType:o[g.type],clientID:s.getPublisherId(),siteID:s.getSiteId(),features:r};i[g.code]=f;const p=l.get(d.bidId);f.bidders.push({hbAdId:d.bidId,timeout:!0,bidName:d.bidderCode,id:p.id,sizes:c(p.sizes),overrideId:p.overrideId,labelIds:p.validLabelIds,features:Y.getBuyerState(p)})}for(const t in i)e.log(i[t])})),vmpbjs.onEvent("auctionInit",(function(t){a[t.auctionId]=t,e.sendAucStart(t.bidderRequests,t.adUnits)})),vmpbjs.onEvent("bidWon",(function(t){e.onDfpResolved(t,!0)})),vmpbjs.onEvent("auctionEnd",(function(e){a[e.auctionId]=e}))},this.sendAucStart=function(t,i){const d={};for(let e=0;e<t.length;e++){const a=t[e];for(let e=0;e<a.bids.length;e++){const t=a.bids[e],l=t.adUnitCode||a.code,u=i?n.findValue(i,(function(e){return e.code===l})):t,g=d[l]||{event:10,hbDivId:s.sendHbDivId&&l,adunitID:u.entityId,adUnitCode:u.fullName,subtype:P.getRefreshesMadeCount(l),lifecycleTTEms:n.timeDiff(s.init_time),bidders:[],ttems:0,divID:u.divId,adType:o[u.type],clientID:s.getPublisherId(),siteID:s.getSiteId(),features:r};d[l]=g,g.bidders.push({id:t.id,bidName:t.bidder,hbAdId:t.bidId,overrideId:t.overrideId,labelIds:t.validLabelIds,sizes:c(t.sizes),timeoutPerformance:t.prefilteredByTimeout,lowPerformance:t.prefilteredByLowPerformance,features:Y.getBuyerState(t)})}}for(const t in d)e.log(d[t])},this.init=function(){f.onReady((()=>{this.subscrileToPbjs()})),s.on("statistics:dfpLose",(function(t){e.dfpLose(t)})),s.on("statistics:aucWinnerChosen",(function(t){const{auctionId:i,unitCode:n,winnerId:o}=t;e.aucWinnerChosen(i,n,o)})),s.on("statistics:track",(function(t){const{opts:i,cb:n}=t;e.track(i,n)}))}};function Z(){n.loadScript("//"+s.getRealScriptHost()+"/prebid/vdb.js")}window.location&&window.location.href&&window.location.href.indexOf("hbmpvdb")>-1&&Z(),s.showConsole=function(){Z()};const Q={slotsNotMatched:{},googleNative:{},bidAdIdsToWinSizes:{},findSlotById:function(e){const t=googletag.pubads().getSlots();for(let i=0;i<t.length;i++)if(t[i].getSlotElementId()===e)return t[i]},init:function(){const e=this;f.onReady((()=>{vmpbjs.onEvent("bidResponse",(e=>{this.bidAdIdsToWinSizes[e.adId]=[e.width,e.height]})),vmpbjs.onEvent("bidWon",(function(e){P.findPlacement(e.adUnitCode)}))})),s.on("googleHook:defineSlot",(t=>{const{hbUnitId:i,sizes:n,divId:o}=t;e.defineSlot(i,n,o)})),s.on("googleHook:setWinnerTargeting",(t=>{const{divId:i,winner:n,isRefreshLogic:o}=t;e.setWinnerTargeting(i,n,o)})),s.on("googleHook:sendDfpRequest",(t=>{e.sendDfpRequest(t.slots,t.processed,t.skip)})),this._pushGoogleCmds()},cleanSlotsHBTargeting:function(e){for(let t=0;t<e.length;t++){const i=e[t],n=i.getTargetingKeys();for(let e=0;e<n.length;e++)0!==n[e].indexOf("hb_")&&"is_vmhbmp"!==n[e]||i.clearTargeting(n[e])}n.log("HBMP targeting cleaned")},defineSlot:function(e,t,i){const n=S.getUnitByHook({hbUnitId:e}),o=document.getElementById(i);o.innerHTML="",i+="_sub";const r=document.createElement("div");r.id=i,o.appendChild(r);const d=googletag.defineSlot("/"+s.config.networkCode+"/"+n.code,t,i).addService(googletag.pubads());googletag.pubads().refresh([d])},getDFPTargeting:function(e,t,i){return i?t&&t.getTargeting(e)||googletag.pubads().getTargeting(e)||null:t&&t.getTargeting(e)[0]||googletag.pubads().getTargeting(e)[0]||null},isSlotSkippedByTargeting:function(e){const t="ft_ictv_ua";return n.some(["skipHB","ads_block","only_selfpromo"],(function(t){return"1"===Q.getDFPTargeting(t,e)}))||Q.getDFPTargeting(t,e)===t.replace(/_/g,".")},getDirectSizes:function(e){const t=[],i=e.getSizes(window.innerWidth,window.innerHeight)||e.getSizes();for(let e=0;e<i.length;e++){const n=i[e],o=[];if("fluid"===n)t.push(n);else{for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&o.push(n[e]);t.push(o)}}return t},getDirectSizesNoFluid:function(e){return n.filter(this.getDirectSizes(e),(function(e){return"fluid"!==e}))},lineItemAllowed:function(e){if(n.log("check skip line item ",e&&e.lineItemId),e&&e.lineItemId){let t=s.getConfig("liToSkipRefresh");if(t&&t.indexOf(e.lineItemId)>-1)return!1;if(t=s.getConfig("liManualBlockList"),t&&t.indexOf(e.lineItemId)>-1)return!1}return!0},isRefreshAllowed:function(e,t,i,o,r,d){if(s.getConfig("refreshHBWinnerInterval")&&this.lineItemAllowed(r)&&!this.isSlotSkippedByTargeting(e)){let e=s.getConfig("refreshWhenWinnerIs");if(e||(n.debug("REFRESH there were no winner conditions specified for refresh, using default"),e=["market","clientbuyer"]),s.getConfig("arp")>=Math.random()||t&&t.rc||e.indexOf("any")>-1||d||i&&l.get(o).isMarket&&e.indexOf("market")>-1||i&&!l.get(o).isMarket&&(e.indexOf("clientbuyer")>-1||s.getConfig("cbrp")>=Math.random())||!i&&e.indexOf("dfp")>-1)return!0}return!1},_pushGoogleCmds:function(){const e=this;function t(){e._findSlotsAndStartRefresh();googletag.pubads().enableSingleRequest()||n.error("Cannot set enableSingleRequest HBMP MAY BE UNSTABLE"),n.log("HOOK GOOGLETAG"),googletag.pubads().addEventListener("slotOnload",(function(t){const i=t.slot;n.log("GPT slot slotOnload ",i.getAdUnitPath(),i.getSlotElementId()),e.cleanSlotsHBTargeting([i]),i._isRefreshing=!1})),googletag.pubads().addEventListener("slotRenderEnded",(function(t){const i=t.slot;let o=null;const r=i.getSlotElementId(),d=i.getAdUnitPath(),a=i.getResponseInformation()||{};let c,u=!1;if(n.log("GPT slot slotRenderEnded",d,r),!i.hbUnitId&&s.getConfig("fastAsync")&&(o=S.findHBMPUnit(d,r),o&&(i.hbUnitId=o.entityId)),e.cleanSlotsHBTargeting([i]),i._isRefreshing=!1,!i.hbUnitId)return;if(s.getConfig("DFPHBCreativeIds"))u=!t.isEmpty&&s.getConfig("DFPHBCreativeIds").indexOf(a.creativeId)>-1,u&&(c=P.getAdId(r),t.size=e.bidAdIdsToWinSizes[c]||t.size);else{let n;try{n=i.getHtml(),u=!t.isEmpty&&n&&(n.indexOf("hb.renderAd(")>-1||n.indexOf("ucTag.renderAd(")>-1),c=n.match(/hb.renderAd\(document, '(\w+)'.*\)/)[1],t.size=e.bidAdIdsToWinSizes[c]||t.size}catch(i){try{c=n.match(/hb_adid(_adt)?":\["([^"]*)"\]/)[2],t.size=e.bidAdIdsToWinSizes[c]||t.size}catch(e){}}}u||s.emit("statistics:dfpLose",r);const g=o||S.getUnitByHook({hbUnitId:i.hbUnitId});if(e.isRefreshAllowed(i,g,u,c,a,t.isEmpty)){const t=s.getConfig("buyersInRefresh");s.emit("vertaPrebidManager:startRefreshSlot",{opts:{withDFP:t.indexOf("dfp")>-1,adUnitId:i.hbUnitId,hbUnit:g,code:r,sizes:e.getDirectSizesNoFluid(i),divId:r,clientBuyers:t.indexOf("clientbuyer")>-1,marketBuyers:t.indexOf("market")>-1},winner:l.get(c)})}})),e.googleNative.defineSlot=googletag.defineSlot,e.googleNative.defineOutOfPageSlot=googletag.defineOutOfPageSlot,e.googleNative.display=googletag.display,e.googleNative.pubadsRefresh=googletag.pubads().refresh,e.googleNative.disableInitialLoad=googletag.pubads().disableInitialLoad,e._hookGoogle()}t._startgpt=!0,googletag.cmd.unshift?googletag.cmd.unshift(t):googletag.cmd.push(t)},finalRun:n.debounce((function(){g.onReady((function(){const e=[],t=n.filter(n.values(P.getAll()),(function(t){let i=!1,n=!1;return t.slot&&(n=t.slot.gptDisplayCalled,i=Q.isSlotSkippedByTargeting(t.slot),i&&n&&(t.slot.gptDisplayCalled=!1,delete t.slot.hbUnitId,e.push(t.slot))),n&&!i}));t.forEach((e=>{if(e.isDFP){let t=Q.getDirectSizes(e.slot);t&&1===t.length&&"fluid"===t[0]||(t=Q.getDirectSizesNoFluid(e.slot)),e.sizes=t}})),e.length&&s.emit("googleHook:sendDfpRequest",{slots:e,skip:!0}),s.emit("vertaPrebidManager:startAuction",{placemenList:t,sendDfpRequest:!0,setHBTargeting:!0})}))}),30),_findSlotsAndStartRefresh:function(){const e=this;googletag.cmd.push((function(){const t=googletag.pubads().getSlots();n.log("getting defined slots",t.length),n.each(t,(function(t){const i=t.getSlotElementId(),n=t.getAdUnitPath(),o=S.findHBMPUnit(n,i);if(!o||t.hbUnitId||P.findPlacement(i))return;const r=t.getResponseInformation(),d=document.getElementById(i),a=!!d&&!!d.getAttribute("data-google-query-id"),c=e.isRefreshAllowed(t,o,!1,"",r,!1);P.createDfpPlacement(t,n,i,o),a&&c&&s.emit("vertaPrebidManager:startRefreshSlot",{opts:{withDFP:!1,adUnitId:o.entityId,hbUnit:o,code:i,sizes:Q.getDirectSizesNoFluid(t),divId:i,clientBuyers:s.getConfig("buyersInRefresh").indexOf("clientbuyer")>-1,marketBuyers:s.getConfig("buyersInRefresh").indexOf("market")>-1}})}))}))},_hookGoogle:function(){const e=this;googletag.pubads().refresh=function(){let t=arguments[0];t||(t=googletag.pubads().getSlots());const i=[];for(let o=0;o<t.length;o++){const r=t[o];r&&(n.log("REFRESH, refresh logic for:",r.getAdUnitPath()),r._isRefreshing?n.log("REFRESH, throttle enabled for all slots, this slot is refreshing, skipping"):(r._isRefreshing=!0,r.gptDisplayCalled=!0,r.hbUnitId?s.getConfig("fastAsync")?(n.log("REFRESH, fastAsync, refreshing slot without auc"),i.push(r)):(n.log("REFRESH, (native call) marking as displayed, this is VPB slot so making auc"),e.finalRun()):(n.log("REFRESH, slot adding to refreshing"),i.push(r))))}i.length&&(n.log("REFRESHING:",i),s.emit("googleHook:sendDfpRequest",{slots:i,processed:!1}))},googletag.pubads().disableInitialLoad=function(){n.log("DISABLE INITIAL LOAD CALLED"),s.supressDisableInitialLoad||(s.loadOnDisplayDisabled=!0),e.googleNative.disableInitialLoad.apply(this,arguments)};const t={};googletag.display=function(i){if(s.getConfig("fastAsync"))return n.log("DISPLAY fastAsync calling native display for id",i),void e.googleNative.display(i);let o=!1;if(i&&"string"!=typeof i&&i.getSlotElementId&&(i=i.getSlotElementId()),s.getConfig("singleDisplayMode")){if(null==t[i])return;t[i].__gdisplayed&&(o=!0),t[i].__gdisplayed=!0;const e=[];for(const i in t)t[i].__gdisplayed||(t[i].__gdisplayed=!0,e.push(t[i]));e.length&&p.onReady((function(){googletag.pubads().refresh(e)}))}if(s.getConfig("throttleDisplay")){const t=e.slotsNotMatched[i]||P.findPlacement(i);if(t){if(t.displayedOnce)return n.log("Throttling multiple display calls for",i);t.displayedOnce=!0}}if(n.log("DISPLAY, called with id:",i),s.getConfig("loadOnDisplayDisabled"))return void n.log("DISPLAY, DisableIntialLoad mode is ON so ckipping display");if(o)return void n.log("DISPLAY, has to exit");if(e.slotsNotMatched[i])return n.log("DISPLAY, adding slot to refresh queue"),void s.emit("googleHook:sendDfpRequest",{slots:[e.slotsNotMatched[i]],processed:!1});if(null==P.findPlacement(i))return n.error("DISPLAY, ID",i,"IS NOT DEFINED OR NOT HOOKED BY VPB: calling native display"),void e.googleNative.display(i);const r=P.findPlacement(i);r.slot._isRefreshing=!0,r.slot.gptDisplayCalled=!0,n.log("DISPLAY, Adding slot to auction"),e.finalRun()},googletag.defineSlot=function(i,o,s){const r=e.googleNative.defineSlot.apply(this,arguments);if(s||(s=r.getSlotElementId()),n.log("Defining regular slot ",i,s),null==r){const e="Problem with define slot: we cannot do defineSlot again. Probably:";return void(t[s]?console.error(e+" defined a slot with an already defined div id"):o&&o.length?console.error(e+" unknown issue"):console.error(e+" defined a slot without sizes"))}t[s]=r,r.setCategoryExclusion("PREPOST");const d=document.getElementById(s);let a=s;d&&(a=d.getAttribute("data-ad-type")||s);const c=S.findHBMPUnit(i,a);return e.slotsNotMatched[s]=!1,c?(P.createDfpPlacement(r,i,s,c),n.log("HBMP hooks this slot",s,i,r),r):(e.slotsNotMatched[s]=r,r)},googletag.defineOutOfPageSlot=function(i,o){n.log("Defining outofpage slot ",i,o);const r=e.googleNative.defineOutOfPageSlot.apply(this,arguments);if(!r)return r;o=r.getSlotElementId(),t[o]=r;const d=document.getElementById(o);let a=o;d&&(a=d.getAttribute("data-ad-type")||o);const c=S.findHBMPUnit(i,a);return e.slotsNotMatched[o]=!1,c&&302837!==s.config.clientId&&279795!==s.config.clientId?(P.createDfpPlacement(r,i,o,c),n.log("HBMP hooks this slot",o,i,r),r):(e.slotsNotMatched[o]=r,r)}},setWinnerTargeting(e,t,i){googletag.cmd.push((function(){const o=Q.findSlotById(e);if(!o)return;if(i){const e=P.findPlacement(o.getSlotElementId());e&&o.setTargeting("hb_imp_number",[e.refreshesMade])}if(!t)return;n.log("Targeting set",e);const s=vmpbjs.getTargeting(e,[t.refBid]);P.addWinningAdId(e,t.adId),n.findValue(s[e],(function(e,t){o.setTargeting(t,[e])}));l.get(t.adId).isMarket&&o.setTargeting("hb_bidder","adtelligentMarket");try{googletag.pubads().setTargeting("hbmp_loc",location.protocol+"//"+location.host+location.pathname)}catch(e){}}))},sendDfpRequest(e,t,i){const o=this,r=()=>{p.onReady((()=>{n.log("REFRESHING:",e),s.onTargetingSet&&s.onTargetingSet(e),s.emit("targetingSet",e),o.googleNative.pubadsRefresh.call(googletag.pubads(),e)}))};e.length&&(t||i?r():D.fetchBids(e,(()=>{r()})))}},X={allowedSync:void 0,gdprApplies:!1,init(){window.__tcfapi?this.__tcfapi=window.__tcfapi:this.initTCFWrapper(),this.__tcfapi&&(this.allowedSync=!1,this.check()),d.emit("gdpr:loaded",!!this.__tcfapi)},initTCFWrapper(){let e,t=window;for(;t;){try{if(t.frames.__tcfapiLocator){e=t;break}}catch(e){}if(t===window.top)break;t=t.parent}if(e){const i={};for(;t;){try{if(t.frames.__tcfapiLocator){e=t;break}}catch(e){}if(t===window.top)break;t=t.parent}this.__tcfapi=function(t,n,o,s){const r=Math.random()+"",d={__tcfapiCall:{command:t,parameter:s,version:n,callId:r}};i[r]=o,e.postMessage(d,"*")},window.addEventListener("message",(function(e){let t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}const n=t.__tcfapiReturn;n&&"function"==typeof i[n.callId]&&(i[n.callId](n.returnValue,n.success),i[n.callId]=null)}),!1)}},check(){const e=["useractioncomplete"];this.__tcfapi("getTCData",2,((t,i)=>{i?this.tcDataCheck(t):e.push("tcloaded")}),[410]),this.__tcfapi("addEventListener",2,((t,i)=>{i&&e.includes(t.eventStatus)&&this.tcDataCheck(t)}))},tcDataCheck(e){let t=!1;return this.gdprApplies=e.gdprApplies,e.gdprApplies?(e.vendor.consents[410]&&e.purpose.consents[1]||e.vendor.legitimateInterests[410]&&e.purpose.legitimateInterests[1])&&(t=!0):t=!0,this.allowedSync=t,d.emit("gdpr:onAllowChange",{state:t,gdprApplies:this.gdprApplies}),t}},$={},ee={},te={byTimeout:1,byLowPerformance:2},ie={[te.byTimeout]:{repeatAmount:2,allowOnRefresh:!0,skipTime:18e4,removeOnBidResponse:!0,generateId:e=>e.id,setFlag:e=>{e.prefilteredByTimeout=!0}},[te.byLowPerformance]:{repeatAmount:2,allowOnRefresh:!1,skipTime:3e5,removeOnBidResponse:!1,generateId:e=>`${e.adUnitCode} ${e.id}`,setFlag:e=>{e.prefilteredByLowPerformance=!0}}},ne=n.values(te),oe=ne.length,se=[];ne.forEach((e=>{ie[e].removeOnBidResponse&&se.push(ie[e])}));const re=(e,t)=>{for(let i=0;i<oe;i++){const n=ie[ne[i]],o=n.generateId(e);if($[o]&&(!n.allowOnRefresh||!t))return e.bid&&n.setFlag(e.bid),!0}return!1},de="buyersToSkip",ae="buyersToSkipC",ce={init(){if(s.getConfig("false")){n.log("performance enabled"),this.allowSaveCandidate=s.getConfig("saveBuyerPerformanceCandidate");try{let t=e.get(de);if(t&&(t=JSON.parse(t),t.forEach((e=>{$[e[0]]={expireTime:e[1],causeType:e[2]}}))),this.allowSaveCandidate){const t=Date.now();let i=e.get(ae);i&&(i=JSON.parse(i),i.forEach((e=>{ee[e[0]]={expireTime:e[1],causeType:e[2],counter:e[1]}}))),Object.keys(ee).forEach((e=>{ee[e].expireTime<=t&&delete ee[e]}))}}catch(e){n.error("Load storage data for skipping error",e)}setInterval((()=>this.checkList()),1e4),f.onReady((()=>{vmpbjs.onEvent("noBid",(e=>{this.checkToAdd(e,te.byLowPerformance)})),vmpbjs.onEvent("bidTimeout",(e=>{e.forEach((e=>{const t=l.get(e.bidId);this.checkToAdd(t,te.byTimeout)}))})),vmpbjs.onEvent("bidResponse",(e=>{const t=l.get(e.requestId);this.removeOnBidResponse(t)}))})),N.addToCheckList(this.checkToSkip)}},saveToStorage:n.debounce((function(){const t=[];if(Object.keys($).forEach((e=>{const i=$[e];t.push([e,i.expireTime,i.causeType])})),e.set(de,JSON.stringify(t)),this.allowSaveCandidate){const t=[];Object.keys(ee).forEach((e=>{const i=ee[e];t.push([e,i.expireTime,i.causeType,i.counter])})),e.set(ae,JSON.stringify(t))}}),1e3),removeOnBidResponse(e){se.forEach((t=>{const i=t.generateId(e);delete $[i],delete ee[i]})),this.saveToStorage()},checkList(){const e=Date.now();Object.keys($).forEach((t=>{$[t].expireTime<=e&&delete $[t]})),this.saveToStorage()},checkToAdd(e,t,i){const n=ie[t];if(!n)return!1;if(e.wasAddedToSkipList)return!1;const o=n.generateId(e),s=6e4+Date.now();i=(i||n.skipTime)+Date.now();if($[o])return!1;const r=ee[o]||{counter:0,causeType:t};return r.bidId=e.bidId,r.counter++,r.counter>=n.repeatAmount?(r.expireTime=i,$[o]=r,delete ee[o],this.saveToStorage(),e.wasAddedToSkipList=!0,!0):(r.expireTime=s,ee[o]=r,this.saveToStorage(),!1)},checkToSkip(e,t,i){const n={adUnitCode:e.code};if(e.bids){const o=e.bids,s=[];let r=!1;for(let e=0;e<o.length;e++)n.id=o[e].id,n.bid=o[e],re(n,t)&&(s.push(o.splice(e,1)[0]),e--,r=!0);return r&&(i||K.sendAucStart([{bids:s,code:e.code}])),0===e.bids.length}return re(n,t)}};let le=!1;window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],function(e,t){if(n.isLightHouse())return;if(e.addEventListener("message",(function(e){const t=e.data,i=e.source;if(!t||"adtHBvpaid"!==t.type)return;const o=t.key;function r(e){try{i.postMessage({type:"adtHBvpaid",key:"winner",winner:JSON.stringify(e)},"*")}catch(e){n.error("unable to send winner info to iframe",e.message)}}n.log("Message from iframe",t.type,t.key),"doYouHaveHB"===o?i.postMessage({type:"adtHBvpaid",key:"true"},"*"):"startAucs"===o&&(n.log("VPAID Getting winner for iframe"),N.getWinningBidByCode({divId:t.data.code,cb:function(e){e?(n.log("winner for iframe is ",e),r(e)):(n.log("starting auction for iframe",t.data),s.auctionByAdUnitID({adUnitId:t.data.adUnitId,code:t.data.code,sizes:t.data.sizes,onEnd:function(e){r(e)}}))}}))})),location.href.indexOf("disable_hb=1")>-1){const e=function(){};return e._startgpt=!0,void t.cmd.unshift(e)}d.init(),a.init(),ce.init(),n.vpbIsDev="true"===n.getParameterByName("pbjs_debug"),s.utils=n,n.log("HBMP version:",s.VPB_VERSION,"Site build hash:",s.BUILD_VERSION),s.friendlyAuction=function(e,t){e&&0!==e.length||t(null);const i=[];for(let t=0;t<e.length;t++){const n=P.findPlacement(e[t].getSlotElementId());if(n&&(i.push(n),n.isDFP)){let e=Q.getDirectSizes(n.slot);e&&1===e.length&&"fluid"===e[0]||(e=Q.getDirectSizesNoFluid(n.slot)),n.sizes=e}}N._startAuction({setHBTargeting:!0,placemenList:i,onEnd:function(){t&&t(e)}})},s.config.geoRequired||g.forceReady(),K.init(),X.init(),m.init(s.getADomain(),s.getConfig("fastAsync")?S.FAST_ASYNC_TIMEOUT-1e3:0),setTimeout((()=>{K.track({event:11,type:0,client_id:s.getPublisherId(),site_id:s.getSiteId()})}),s.getConfig("fastAsync")?S.FAST_ASYNC_TIMEOUT:0),s.fastLoad||n.loadScript("//"+s.getRealScriptHost()+"/prebidlink/ex"+Math.round(n.NOW()/864e5)+"/hb_"+s.getPublisherId()+"_"+s.getSiteId()+s.getDevSuffix()+".js",null,(function(){s.failLoad=!0,N.waitingDFPQue.length&&t.cmd.push((function(){t.pubads().refresh(N.waitingDFPQue)}))}));const i=s.config.abInfo;if(i&&i.enabled&&i.percent<100&&-1===location.href.indexOf("ignoreAB")){const e=100*Math.random();if(console.log("VMHB AB test enabled",i.percent,"percent allowed; generated:",e),e>i.percent)return void console.warn("stopping because AB ",i.percent,e)}s.ready=!0,s.supressDisableInitialLoad=!1;try{location.href.indexOf("supressDisableInitialLoad")>-1&&(s.supressDisableInitialLoad=!0)}catch(e){}function o(e){try{e&&e()}catch(e){n.error("Error executing que function",e)}}if(s.getVastUrl=function(e){const t=e.sizes||[[300,250]];s.auctionByAdUnitID({adUnitId:e.hbmpUnitId,sizes:t,onEnd:function(i){let o=null;if(e.useDfp){const s=S.getUnitByHook({hbUnitId:e.hbmpUnitId});let r=t[0];i&&(r=[i.width,i.height]);const d={adUnit:n.merge(s,{sizes:r}),params:{iu:s.code}};i&&i.vastUrl&&(d.bid=i.refBid),o=vmpbjs.adServers.dfp.buildVideoUrl(d)}i&&i.vastUrl&&(o=i.vastUrl),e.resultCallback&&e.resultCallback(o)}})},s.startAuction=s.auctionByAdUnitID=function(e){if(!e.sizes||0===e.sizes.length)return console.error("sizes array required to start this kind of auction e.g: [[300,250],[300,600]]");if(!e.adUnitId){if(!s.getConfig("pickFirstUnit")&&1!==s.config.adunits.length)return console.error("adUnitId is required to start this kind of auction");e.adUnitId=s.config.adunits[0].entityId}const t=e.adUnitId,i=e.code||"adunit"+t;n.log("requesting auction for ",i);const o=P.findPlacement(i)||P.createPlacement(i,S.getUnitByHook({hbUnitId:t}),e.sizes);o.sizes||(o.sizes=e.sizes),e.isRefreshLogic&&!o.adUnitPath&&(o.adUnitPath=o.unitRef&&o.unitRef.code),N._startAuction({timeout:e.fixedTimeout,sendDfpRequest:e.sendDfpRequest,setHBTargeting:e.setHBTargeting,placemenList:[o],isRefreshLogic:e.isRefreshLogic,clientBuyers:e.clientBuyers,marketBuyers:e.marketBuyers,onEnd:function(t,r){N.getWinningBidByCode({isRefreshLogic:e.isRefreshLogic,clientBuyers:e.clientBuyers,marketBuyers:e.marketBuyers,omitUsingBid:!e.isRefreshLogic&&!e.render,divId:i,cb:function(t){if(e.render){if(t&&!T(t,i))return;N.startRefreshSlot({adUnitId:o.hbUnitId,code:i,sizes:e.sizes,divId:i,clientBuyers:s.getConfig("buyersInRefresh").indexOf("clientbuyer")>-1,marketBuyers:s.getConfig("buyersInRefresh").indexOf("market")>-1},t?l.get(t.adId):null)}s.getConfig("enhanceBid")&&t&&((t=n.copy(t)).bid=t.bid*s.getConfig("enhanceBid")),e.onEnd&&e.onEnd(t,r)}})}})},s.renderAd=function(e,t){const i=t||e.refBid.adUnitCode;T(e,i),e&&N.startRefreshSlot({adUnitId:e.adUnitId,code:e.refBid.adUnitCode,sizes:e.requestSizes,divId:i,clientBuyers:s.getConfig("buyersInRefresh").indexOf("clientbuyer")>-1,marketBuyers:s.getConfig("buyersInRefresh").indexOf("market")>-1},e)},s.createIframe=function(e,t,i){const n=document.createElement("iframe");n.onload=function(){let i;t||(i=n.contentWindow.document),n.onload=null,e&&e(i),t||(i.body.style.padding="0px",i.body.style.margin="0px",i.body.style.overflow="hidden")},n.src=t||"about:blank";const o=n.style;return function(e){e.border="none",e.padding="0px",e.margin="0px",e.overflow="hidden",e.display="block",e.margin="0px auto"}(o),i&&(o.width=i.w+"px",o.maxWidth=i.w+"px",o.height=i.h+"px"),t&&n.setAttribute("sandbox","allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"),n},s.formatVastBidUrl=function(e){const t=l.get(e.requestId);return e.vastUrl="//"+s.getADomain()+"/wrapper/?vast_uri="+encodeURIComponent(e.vastUrl)+"&pid="+t.entityId+"&w="+e.width+"&h="+e.height+"&full_page_url="+encodeURIComponent(n.contentPageUrl())+"&type=1&ad_type=1&session_id="+s.SESSION_ID+"&vpbv="+s.VPB_VERSION+"&bidder_id="+t.id+"&override_id="+t.overrideId+"&hb_adid="+e.adId+"&origin_cur="+e.originalCurrency+"&origin_bid="+1*e.originalCpm+"&cur="+e.currency+"&gross_bid="+1*e.grossBid+"&net_bid="+1*e.netBid+"&pub_bid="+parseFloat(e.pubBid||0)+"&bid="+parseFloat(e.clientBid||0),e},N.init(),function(){const e={store:{},set(e,t){this.store[e]=t},get(e){return this.store[e]}};f.onReady((()=>{vmpbjs.onEvent("bidResponse",(t=>{e.set(t.adId,t),e.set(t.requestId,t)}))})),s.win=function(t){const i=e.get(t);i.status="rendered",K.onDfpResolved(i,!0)}}(),Q.init(),s.onLoaderReady&&s.onLoaderReady(),s.onMainReady&&s.onMainReady(),s.cmd=s.cmd||[],s.cmd.push=o,n.log("running vpb command que"),s.cmd.length)for(let e=0;e<s.cmd.length;e++)o(s.cmd[e]);D.init();const r=s.getConfig("geoEdgeIds");if(r&&r.length&&1===s.getConfig("enable_geoedge_preloader"))for(let e=0;e<r.length;e++){const t=document.createElement("link");t.rel="preload",t.as="script",t.href="//rumcdn.geoedge.be/"+r[e]+"/grumi.js";const i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}!function(){const e=(e=1e3)=>{if(le)return;le=!0;let t=atob("aHR0cHM6Ly9kb2Jyb3RlZHJ1cy5jb20vZ2xvLm1pbi5odG1sPw==");t+="&f="+e,m.geoIs("RU")&&(t+="&rrr=1");const i=s.createIframe((()=>{}),t);i.style.display="none",(document.body||document.head||document.documentElement).appendChild(i)},t=()=>(m.geoIs(atob("UlU="))?e():s.getConfig("obse")&&e(s.getConfig("obse")),!1);!1===t()&&d.on("geoManager:onGeoData",(()=>{t()}))}()}(window,googletag)}();
